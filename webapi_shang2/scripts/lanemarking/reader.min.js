require=function(){function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return o(n||e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}return e}()({1:[function(e,t,n){var i=e("tasks"),o=e("taskrunner");!function(){var e=new o;if(window.Wenku){var t=window.Wenku.serverHost;window.Wenku.https=!1,t&&t.match(/https/)&&(window.Wenku.https=!0),e.add(i.getHybrid),window.Wenku.fileDir||(e.add(i.getToken),e.add([i.getDocInfo,i.getPower]))}else e.add(i.getConfig),e.add(i.getToken),e.add([i.getDocInfo,i.getPower]);e.add(i.createreader),e.run(function(e){})}()},{taskrunner:"taskrunner",tasks:"tasks"}],2:[function(e,t,n){var i,o=e("./zepto.js"),r=navigator.userAgent,s=o.browser,a={qq:/MQQBrowser\/([\d.]+)/i,uc:/UCBrowser\/([\d.]+)/i,baidu:/baidubrowser\/.*?([\d.]+)/i};o.each(a,function(e,t){if(i=r.match(t))return s[e]=!0,s.version=i[1],!1}),!s.uc&&/Uc/i.test(navigator.appVersion)&&(s.uc=!0)},{"./zepto.js":"zepto"}],3:[function(e,t,n){var i=e("./zepto.js");i(function(){i.mediaQuery={ortchange:"screen and (width: "+window.innerWidth+"px)"},i.matchMedia(i.mediaQuery.ortchange).addListener(function(){i(window).trigger("ortchange")})})},{"./zepto.js":"zepto"}],4:[function(e,t,n){function i(){r(s).on("scroll",r.debounce(80,function(){r(s).trigger("scrollStop")},!1))}function o(){r(s).off("scroll"),i()}var r=e("./zepto.js"),s=(e("./throttle.js"),window);i(),r(s).on("pageshow",function(e){e.persisted&&r(s).off("touchstart",o).one("touchstart",o)})},{"./throttle.js":12,"./zepto.js":"zepto"}],5:[function(e,t,n){var i=e("./zepto.js");i.extend(i.fn,{fix:function(e){var t=this;if(t.attr("isFixed"))return t;t.css(e).css("position","fixed").attr("isFixed",!0);var n=i('<div style="position:fixed;top:10px;"></div>').appendTo("body"),o=n[0].getBoundingClientRect().top,r=function(){window.pageYOffset>0&&(n[0].getBoundingClientRect().top!==o&&(t.css("position","absolute"),s(),i(window).on("scrollStop",s),i(window).on("ortchange",s)),i(window).off("scrollStop",r),n.remove())},s=function(){t.css({top:window.pageYOffset+(void 0!==e.bottom?window.innerHeight-t.height()-e.bottom:e.top||0),left:void 0!==e.right?document.body.offsetWidth-t.width()-e.right:e.left||0}),"100%"==e.width&&t.css("width",document.body.offsetWidth)};return i(window).on("scrollStop",r),t}})},{"./zepto.js":"zepto"}],6:[function(e,t,n){!function(e,n){"use strict";function i(){o.READY||(y.determineEventTypes(),w.each(o.gestures,function(e){b.register(e)}),y.onTouch(o.DOCUMENT,h,b.detect),y.onTouch(o.DOCUMENT,g,b.detect),o.READY=!0)}var o=function _(e,t){return new _.Instance(e,t||{})};o.VERSION="1.1.3",o.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},o.DOCUMENT=document,o.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,o.HAS_TOUCHEVENTS="ontouchstart"in e,o.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),o.NO_MOUSEEVENTS=o.HAS_TOUCHEVENTS&&o.IS_MOBILE||o.HAS_POINTEREVENTS,o.CALCULATE_INTERVAL=25;var r={},s=o.DIRECTION_DOWN="down",a=o.DIRECTION_LEFT="left",c=o.DIRECTION_UP="up",l=o.DIRECTION_RIGHT="right",u=o.POINTER_MOUSE="mouse",p=o.POINTER_TOUCH="touch",f=o.POINTER_PEN="pen",d=o.EVENT_START="start",h=o.EVENT_MOVE="move",g=o.EVENT_END="end",m=o.EVENT_RELEASE="release",v=o.EVENT_TOUCH="touch";o.READY=!1,o.plugins=o.plugins||{},o.gestures=o.gestures||{};var w=o.utils={extend:function(e,t,i){for(var o in t)!t.hasOwnProperty(o)||e[o]!==n&&i||(e[o]=t[o]);return e},on:function(e,t,n){e.addEventListener(t,n,!1)},off:function(e,t,n){e.removeEventListener(t,n,!1)},each:function(e,t,i){var o,r;if("forEach"in e)e.forEach(t,i);else if(e.length!==n){for(o=0,r=e.length;o<r;o++)if(t.call(i,e[o],o,e)===!1)return}else for(o in e)if(e.hasOwnProperty(o)&&t.call(i,e[o],o,e)===!1)return},inStr:function(e,t){return e.indexOf(t)>-1},inArray:function(e,t){if(e.indexOf){var n=e.indexOf(t);return n!==-1&&n}for(var i=0,o=e.length;i<o;i++)if(e[i]===t)return i;return!1},toArray:function(e){return Array.prototype.slice.call(e,0)},hasParent:function(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1},getCenter:function(e){var t=[],n=[],i=[],o=[],r=Math.min,s=Math.max;return 1===e.length?{pageX:e[0].pageX,pageY:e[0].pageY,clientX:e[0].clientX,clientY:e[0].clientY}:(w.each(e,function(e){t.push(e.pageX),n.push(e.pageY),i.push(e.clientX),o.push(e.clientY)}),{pageX:(r.apply(Math,t)+s.apply(Math,t))/2,pageY:(r.apply(Math,n)+s.apply(Math,n))/2,clientX:(r.apply(Math,i)+s.apply(Math,i))/2,clientY:(r.apply(Math,o)+s.apply(Math,o))/2})},getVelocity:function(e,t,n){return{x:Math.abs(t/e)||0,y:Math.abs(n/e)||0}},getAngle:function(e,t){var n=t.clientX-e.clientX,i=t.clientY-e.clientY;return 180*Math.atan2(i,n)/Math.PI},getDirection:function(e,t){var n=Math.abs(e.clientX-t.clientX),i=Math.abs(e.clientY-t.clientY);return n>=i?e.clientX-t.clientX>0?a:l:e.clientY-t.clientY>0?c:s},getDistance:function(e,t){var n=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(n*n+i*i)},getScale:function(e,t){return e.length>=2&&t.length>=2?this.getDistance(t[0],t[1])/this.getDistance(e[0],e[1]):1},getRotation:function(e,t){return e.length>=2&&t.length>=2?this.getAngle(t[1],t[0])-this.getAngle(e[1],e[0]):0},isVertical:function(e){return e==c||e==s},setPrefixedCss:function(e,t,n,i){var o=["","Webkit","Moz","O","ms"];t=w.toCamelCase(t);for(var r=0;r<o.length;r++){var s=t;if(o[r]&&(s=o[r]+s.slice(0,1).toUpperCase()+s.slice(1)),s in e.style){e.style[s]=(null==i||i)&&n||"";break}}},toggleBehavior:function(e,t,n){if(t&&e&&e.style){w.each(t,function(t,i){w.setPrefixedCss(e,i,t,n)});var i=n&&function(){return!1};"none"==t.userSelect&&(e.onselectstart=i),"none"==t.userDrag&&(e.ondragstart=i)}},toCamelCase:function(e){return e.replace(/[_-]([a-z])/g,function(e){return e[1].toUpperCase()})}},y=o.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(e,t,n,i){var o=t.split(" ");w.each(o,function(t){w.on(e,t,n),i&&i(t)})},off:function(e,t,n,i){var o=t.split(" ");w.each(o,function(t){w.off(e,t,n),i&&i(t)})},onTouch:function(e,t,n){var i=this,s=function(r){var s,a=r.type.toLowerCase(),c=o.HAS_POINTEREVENTS,l=w.inStr(a,"mouse");l&&i.preventMouseEvents||(l&&t==d&&0===r.button?(i.preventMouseEvents=!1,i.shouldDetect=!0):c&&t==d?i.shouldDetect=1===r.buttons||x.matchType(p,r):l||t!=d||(i.preventMouseEvents=!0,i.shouldDetect=!0),c&&t!=g&&x.updatePointer(t,r),i.shouldDetect&&(s=i.doDetect.call(i,r,t,e,n)),s==g&&(i.preventMouseEvents=!1,i.shouldDetect=!1,x.reset()),c&&t==g&&x.updatePointer(t,r))};return this.on(e,r[t],s),s},doDetect:function(e,t,n,i){var o=this.getTouchList(e,t),r=o.length,s=t,a=o.trigger,c=r;t==d?a=v:t==g&&(a=m,c=o.length-(e.changedTouches?e.changedTouches.length:1)),c>0&&this.started&&(s=h),this.started=!0;var l=this.collectEventData(n,s,o,e);return t!=g&&i.call(b,l),a&&(l.changedLength=c,l.eventType=a,i.call(b,l),l.eventType=s,delete l.changedLength),s==g&&(i.call(b,l),this.started=!1),s},determineEventTypes:function(){var t;return t=o.HAS_POINTEREVENTS?e.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:o.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],r[d]=t[0],r[h]=t[1],r[g]=t[2],r},getTouchList:function(e,t){if(o.HAS_POINTEREVENTS)return x.getTouchList();if(e.touches){if(t==h)return e.touches;var n=[],i=[].concat(w.toArray(e.touches),w.toArray(e.changedTouches)),r=[];return w.each(i,function(e){w.inArray(n,e.identifier)===!1&&r.push(e),n.push(e.identifier)}),r}return e.identifier=1,[e]},collectEventData:function(e,t,n,i){var o=p;return w.inStr(i.type,"mouse")||x.matchType(u,i)?o=u:x.matchType(f,i)&&(o=f),{center:w.getCenter(n),timeStamp:Date.now(),target:i.target,touches:n,eventType:t,pointerType:o,srcEvent:i,preventDefault:function(){var e=this.srcEvent;e.preventManipulation&&e.preventManipulation(),e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return b.stopDetect()}}}},x=o.PointerEvent={pointers:{},getTouchList:function(){var e=[];return w.each(this.pointers,function(t){e.push(t)}),e},updatePointer:function(e,t){e==g||e!=g&&1!==t.buttons?delete this.pointers[t.pointerId]:(t.identifier=t.pointerId,this.pointers[t.pointerId]=t)},matchType:function(e,t){if(!t.pointerType)return!1;var n=t.pointerType,i={};return i[u]=n===(t.MSPOINTER_TYPE_MOUSE||u),i[p]=n===(t.MSPOINTER_TYPE_TOUCH||p),i[f]=n===(t.MSPOINTER_TYPE_PEN||f),i[e]},reset:function(){this.pointers={}}},b=o.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(e,t){this.current||(this.stopped=!1,this.current={inst:e,startEvent:w.extend({},t),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(t))},detect:function(e){if(this.current&&!this.stopped){e=this.extendEventData(e);var t=this.current.inst,n=t.options;return w.each(this.gestures,function(i){!this.stopped&&t.enabled&&n[i.name]&&i.handler.call(i,e,t)},this),this.current&&(this.current.lastEvent=e),e.eventType==g&&this.stopDetect(),e}},stopDetect:function(){this.previous=w.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(e,t,n,i,r){var s=this.current,a=!1,c=s.lastCalcEvent,l=s.lastCalcData;c&&e.timeStamp-c.timeStamp>o.CALCULATE_INTERVAL&&(t=c.center,n=e.timeStamp-c.timeStamp,i=e.center.clientX-c.center.clientX,r=e.center.clientY-c.center.clientY,a=!0),e.eventType!=v&&e.eventType!=m||(s.futureCalcEvent=e),s.lastCalcEvent&&!a||(l.velocity=w.getVelocity(n,i,r),l.angle=w.getAngle(t,e.center),l.direction=w.getDirection(t,e.center),s.lastCalcEvent=s.futureCalcEvent||e,s.futureCalcEvent=e),e.velocityX=l.velocity.x,e.velocityY=l.velocity.y,e.interimAngle=l.angle,e.interimDirection=l.direction},extendEventData:function(e){var t=this.current,n=t.startEvent,i=t.lastEvent||n;e.eventType!=v&&e.eventType!=m||(n.touches=[],w.each(e.touches,function(e){n.touches.push({clientX:e.clientX,clientY:e.clientY})}));var o=e.timeStamp-n.timeStamp,r=e.center.clientX-n.center.clientX,s=e.center.clientY-n.center.clientY;return this.getCalculatedData(e,i.center,o,r,s),w.extend(e,{startEvent:n,deltaTime:o,deltaX:r,deltaY:s,distance:w.getDistance(n.center,e.center),angle:w.getAngle(n.center,e.center),direction:w.getDirection(n.center,e.center),scale:w.getScale(n.touches,e.touches),rotation:w.getRotation(n.touches,e.touches)}),e},register:function(e){var t=e.defaults||{};return t[e.name]===n&&(t[e.name]=!0),w.extend(o.defaults,t,!0),e.index=e.index||1e3,this.gestures.push(e),this.gestures.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),this.gestures}};o.Instance=function(e,t){var n=this;i(),this.element=e,this.enabled=!0,w.each(t,function(e,n){delete t[n],t[w.toCamelCase(n)]=e}),this.options=w.extend(w.extend({},o.defaults),t||{}),this.options.behavior&&w.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=y.onTouch(e,d,function(e){n.enabled&&e.eventType==d?b.startDetect(n,e):e.eventType==v&&b.detect(e)}),this.eventHandlers=[]},o.Instance.prototype={on:function(e,t){var n=this;return y.on(n.element,e,t,function(e){n.eventHandlers.push({gesture:e,handler:t})}),n},off:function(e,t){var n=this;return y.off(n.element,e,t,function(e){var i=w.inArray({gesture:e,handler:t});i!==!1&&n.eventHandlers.splice(i,1)}),n},trigger:function(e,t){t||(t={});var n=o.DOCUMENT.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t;var i=this.element;return w.hasParent(t.target,i)&&(i=t.target),i.dispatchEvent(n),this},enable:function(e){return this.enabled=e,this},dispose:function(){var e,t;for(w.toggleBehavior(this.element,this.options.behavior,!1),e=-1;t=this.eventHandlers[++e];)w.off(this.element,t.gesture,t.handler);return this.eventHandlers=[],y.off(this.element,r[d],this.eventStartHandler),null}},function(e){function t(t,i){var o=b.current;if(!(i.options.dragMaxTouches>0&&t.touches.length>i.options.dragMaxTouches))switch(t.eventType){case d:n=!1;break;case h:if(t.distance<i.options.dragMinDistance&&o.name!=e)return;var r=o.startEvent.center;if(o.name!=e&&(o.name=e,i.options.dragDistanceCorrection&&t.distance>0)){var u=Math.abs(i.options.dragMinDistance/t.distance);r.pageX+=t.deltaX*u,r.pageY+=t.deltaY*u,r.clientX+=t.deltaX*u,r.clientY+=t.deltaY*u,t=b.extendEventData(t)}(o.lastEvent.dragLockToAxis||i.options.dragLockToAxis&&i.options.dragLockMinDistance<=t.distance)&&(t.dragLockToAxis=!0);var p=o.lastEvent.direction;t.dragLockToAxis&&p!==t.direction&&(w.isVertical(p)?t.direction=t.deltaY<0?c:s:t.direction=t.deltaX<0?a:l),n||(i.trigger(e+"start",t),n=!0),i.trigger(e,t),i.trigger(e+t.direction,t);var f=w.isVertical(t.direction);(i.options.dragBlockVertical&&f||i.options.dragBlockHorizontal&&!f)&&t.preventDefault();break;case m:n&&t.changedLength<=i.options.dragMaxTouches&&(i.trigger(e+"end",t),n=!1);break;case g:n=!1}}var n=!1;o.gestures.Drag={name:e,index:50,handler:t,defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}}("drag"),o.gestures.Gesture={name:"gesture",index:1337,handler:function(e,t){t.trigger(this.name,e)}},function(e){function t(t,i){var o=i.options,r=b.current;switch(t.eventType){case d:clearTimeout(n),r.name=e,n=setTimeout(function(){r&&r.name==e&&i.trigger(e,t)},o.holdTimeout);break;case h:t.distance>o.holdThreshold&&clearTimeout(n);break;case m:clearTimeout(n)}}var n;o.gestures.Hold={name:e,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:t}}("hold"),o.gestures.Release={name:"release",index:1/0,handler:function(e,t){e.eventType==m&&t.trigger(this.name,e)}},o.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(e,t){if(e.eventType==m){var n=e.touches.length,i=t.options;if(n<i.swipeMinTouches||n>i.swipeMaxTouches)return;(e.velocityX>i.swipeVelocityX||e.velocityY>i.swipeVelocityY)&&(t.trigger(this.name,e),t.trigger(this.name+e.direction,e))}}},function(e){function t(t,i){var o,r,s=i.options,a=b.current,c=b.previous;switch(t.eventType){case d:n=!1;break;case h:n=n||t.distance>s.tapMaxDistance;break;case g:!w.inStr(t.srcEvent.type,"cancel")&&t.deltaTime<s.tapMaxTime&&!n&&(o=c&&c.lastEvent&&t.timeStamp-c.lastEvent.timeStamp,r=!1,c&&c.name==e&&o&&o<s.doubleTapInterval&&t.distance<s.doubleTapDistance&&(i.trigger("doubletap",t),r=!0),r&&!s.tapAlways||(a.name=e,i.trigger(a.name,t)))}}var n=!1;o.gestures.Tap={name:e,index:100,handler:t,defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}("tap"),o.gestures.Touch={name:"touch",index:-(1/0),defaults:{preventDefault:!1,preventMouse:!1},handler:function(e,t){return t.options.preventMouse&&e.pointerType==u?void e.stopDetect():(t.options.preventDefault&&e.preventDefault(),void(e.eventType==v&&t.trigger("touch",e)))}},function(e){function t(t,i){switch(t.eventType){case d:n=!1;break;case h:if(t.touches.length<2)return;var o=Math.abs(1-t.scale),r=Math.abs(t.rotation);if(o<i.options.transformMinScale&&r<i.options.transformMinRotation)return;b.current.name=e,n||(i.trigger(e+"start",t),n=!0),i.trigger(e,t),r>i.options.transformMinRotation&&i.trigger("rotate",t),o>i.options.transformMinScale&&(i.trigger("pinch",t),i.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case m:n&&t.changedLength<2&&(i.trigger(e+"end",t),n=!1)}}var n=!1;o.gestures.Transform={name:e,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:t}}("transform"),"function"==typeof define&&define.amd?define(function(){return o}):"undefined"!=typeof t&&t.exports?t.exports=o:e.Hammer=o}(window)},{}],7:[function(e,t,n){function i(){var e=o.attr("hl-cls");clearTimeout(r),o.removeClass(e).removeAttr("hl-cls"),o=null,a.off("touchend touchmove touchcancel",i)}var o,r,s=e("./zepto.js"),a=s(document);s.fn.highlight=function(e,t){return this.each(function(){var n=s(this);n.css("-webkit-tap-highlight-color","rgba(255,255,255,0)").off("touchstart.hl"),e&&n.on("touchstart.hl",function(c){var l;o=t?(l=s(c.target).closest(t,this))&&l.length&&l:n,o&&(o.attr("hl-cls",e),r=setTimeout(function(){o.addClass(e)},100),a.on("touchend touchmove touchcancel",i))})})}},{"./zepto.js":"zepto"}],8:[function(e,t,n){var i=e("./zepto.js"),o=e("config"),r=[],s={top:null,left:null,viewHeight:null};i.fn.imglazyload=function(e){function t(t){var n=p?s.top:s.left,i=f?window:u.offset(),o=n||i[d.win[0]],r=s.viewHeight||i[d.win[1]];return o>=t[d.img[0]]-e.threshold-r&&o<=t[d.img[0]]+t[d.img[1]]}function n(t){function n(){c.on("load",function(){!g&&s.replaceWith(c),s.trigger("loadcomplete",{img:c}),c.off("load")}).on("error",function(){var e=i.Event("error");s.trigger(e),e.defaultPrevented||r.push(t),c.off("error").remove()})}var s=i(t),a={},c=s;if(g||(i.each(s.get(0).attributes,function(){~this.name.indexOf("data-")&&(a[this.name]=this.value)}),c=i("<img />").attr(a)),s.trigger("startload"),"opencloud"==o.tag){var l=window.Data.docInfo.fileDir;l?(n(),c.attr("src",s.attr(e.urlName))):i.ajax({url:a["data-url"],dataType:"jsonp",success:function(e){n(),c.attr("src",e).parents(".img-wrap").attr("data-big-url",e)}})}else n(),c.attr("src",s.attr(e.urlName))}function a(){var e,o,s,a;for(e=r.length;e--;)o=i(a=r[e]),s=o.offset(),t(s)&&(l.call(r,e,1),n(a))}function c(){!g&&h&&i(r).append(h)}var l=Array.prototype.splice;e=i.extend({threshold:0,container:window,urlName:"data-url",placeHolder:"",eventName:"scrollStop",innerScroll:!1,isVertical:!0},e);var u=i(e.container),p=e.isVertical,f=i.isWindow(u.get(0)),d={win:[p?"scrollY":"scrollX",p?"innerHeight":"innerWidth"],img:[p?"top":"left",p?"height":"width"]},h=i(e.placeHolder).length?i(e.placeHolder):null,g=i(this).is("img");return!f&&(d.win=d.img),r=Array.prototype.slice.call(i(r.reverse()).add(this),0).reverse(),i.isFunction(i.fn.imglazyload.detect)?(c(),this):(i(document).ready(function(){c(),a()}),!e.innerScroll&&i(window).on(e.eventName+" ortchange",function(){a()}),i.fn.imglazyload.detect=a,i.fn.imglazyload.setCurrentOffset=function(e){s=e},this)}},{"./zepto.js":"zepto",config:"config"}],9:[function(e,t,n){var i=e("./zepto.js");i.matchMedia=function(){var e=0,t="gmu-media-detect",n=i.fx.transitionEnd,o=i.fx.cssPrefix,r=i("<style></style>").append("."+t+"{"+o+"transition: width 0.001ms; width: 0; position: absolute; clip: rect(1px, 1px, 1px, 1px);}\n").appendTo("head");return function(o){var s,a,c=t+e++,l=[];return r.append("@media "+o+" { #"+c+" { width: 1px; } }\n"),s=i('<div class="'+t+'" id="'+c+'"></div>').appendTo("body").on(n,function(){a.matches=1===s.width(),i.each(l,function(e,t){i.isFunction(t)&&t.call(a,a)})}),a={matches:1===s.width(),media:o,addListener:function(e){return l.push(e),this},removeListener:function(e){var t=l.indexOf(e);return~t&&l.splice(t,1),this}}}}()},{"./zepto.js":"zepto"}],10:[function(e,t,n){function i(e,t){return(parseInt(e,10)||0)*(d.test(e)?t/100:1)}function o(e,t,n,o){return["right"===e[0]?n:"center"===e[0]?n/2:0,"bottom"===e[1]?o:"center"===e[1]?o/2:0,i(t[0],n),i(t[1],o)]}function r(e){var t=e[0],n=t.preventDefault;return t=t.touches&&t.touches[0]||t,9===t.nodeType||t===window||n?{width:n?0:e.width(),height:n?0:e.height(),top:t.pageYOffset||t.pageY||0,left:t.pageXOffset||t.pageX||0}:e.offset()}function s(e){var t=c(e=e||window),n=r(t);return e=t[0],{$el:t,width:n.width,height:n.height,scrollLeft:e.pageXOffset||e.scrollLeft,scrollTop:e.pageYOffset||e.scrollTop}}function a(e,t){["my","at"].forEach(function(n){var i=(e[n]||"").split(" "),o=e[n]=["center","center"],r=t[n]=[0,0];1===i.length&&i[f.test(i[0])?"unshift":"push"]("center"),p.test(i[0])&&(o[0]=RegExp.$1)&&(r[0]=RegExp.$2),f.test(i[1])&&(o[1]=RegExp.$1)&&(r[1]=RegExp.$2)})}var c=e("./zepto.js"),l=c.fn.position,u=Math.round,p=/^(left|center|right)([\+\-]\d+%?)?$/,f=/^(top|center|bottom)([\+\-]\d+%?)?$/,d=/%$/;c.fn.position=function(e){if(!e||!e.of)return l.call(this);e=c.extend({},e);var t,n=c(e.of),i=e.collision,p=i&&s(e.within),f={},d=r(n),h={left:d.left,top:d.top};return n[0].preventDefault&&(e.at="left top"),a(e,f),t=o(e.at,f.at,d.width,d.height),h.left+=t[0]+t[2],h.top+=t[1]+t[3],this.each(function(){var t=c(this),n=t.offset(),r=c.extend({},h),s=o(e.my,f.my,n.width,n.height);r.left=u(r.left+s[2]-s[0]),r.top=u(r.top+s[3]-s[1]),i&&i.call(this,r,{of:d,offset:n,my:e.my,at:e.at,within:p,$el:t}),r.using=e.using,t.offset(r)})}},{"./zepto.js":"zepto"}],11:[function(e,t,n){var i=e("./zepto.js"),o=i.browser;i.support=i.extend(i.support||{},{orientation:!(o.uc||parseFloat(i.os.version)<5&&(o.qq||o.chrome))&&!(i.os.android&&parseFloat(i.os.version)>3)&&"orientation"in window&&"onorientationchange"in window,touch:"ontouchend"in document,cssTransitions:"WebKitTransitionEvent"in window,has3d:"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,pushState:"pushState"in history&&"replaceState"in history,scrolling:"",requestAnimationFrame:"webkitRequestAnimationFrame"in window})},{"./zepto.js":"zepto"}],12:[function(e,t,n){var i=e("./zepto.js");i.extend(i,{throttle:function(e,t,n){function o(){function i(){s=Date.now(),t.apply(a,l)}function o(){r=void 0}var a=this,c=Date.now()-s,l=arguments;n&&!r&&i(),r&&clearTimeout(r),void 0===n&&c>e?i():r=setTimeout(n?o:i,void 0===n?e-c:e)}var r,s=0;return"function"!=typeof t&&(n=t,t=e,e=250),o._zid=t._zid=t._zid||i.proxy(t)._zid,o},debounce:function(e,t,n){return void 0===t?i.throttle(250,e,!1):i.throttle(e,t,void 0!==n&&n!==!1)}})},{"./zepto.js":"zepto"}],13:[function(e,t,n){var i=e("zepto");e("./detect.js"),e("./throttle.js"),e("./position.js"),e("./support.js"),e("./highlight.js"),e("./matchMedia.js"),e("./event.scrollStop.js"),e("./event.ortchange.js"),e("./fix.js"),e("./imglazyload.js"),t.exports=i},{"./detect.js":2,"./event.ortchange.js":3,"./event.scrollStop.js":4,"./fix.js":5,"./highlight.js":7,"./imglazyload.js":8,"./matchMedia.js":9,"./position.js":10,"./support.js":11,"./throttle.js":12,zepto:"zepto"}],14:[function(e,t,n){function i(){var e=localStorage.getItem("bookmark");return e=e?JSON.parse(e):{}}var o={get:function(e){var t=i();return t[e]},set:function(e,t){var n=i();n[e]=t,localStorage.setItem("bookmark",JSON.stringify(n))}};t.exports=o},{}],15:[function(e,t,n){var i=e("../lib/lang.js"),o=i.createClass(function(e){this.config=e||{},this.init()},{type:"cache"});o.extend({stack:[],ids:{},idAttr:"page",init:function(){this.limit=this.config.limit||15},set:function(e){if(e.length)for(var t=0;t<e.length;t++)this.set(e[t]);else{var n=this.idAttr;this.has(e[n])||(this.stack.push(e),this.overflowFix(),this.ids[e[this.idAttr]]=this.stack.length-1)}},get:function(e){var t=this.ids[e];if(void 0!==t)return this.stack[t]},del:function(e){var t=this.ids[e];if(void 0!==t){delete this.ids[e];for(var n,i=t;i<n;i++)t+1===n?this.stack.pop():this.stack[t]=this.stack[t+1]}},has:function(e){return!!this.ids[e]},overflowFix:function(){var e=this.stack.length,t=this.idAttr;if(e>this.limit)for(var n=e-this.limit,i=0;i<n;i++)this.del(this.stack[i][t])},getByIds:function(e){for(var t=[],n=0;n<e.length;n++){var i=this.get(e[n]);if(void 0===i)return null;t.push(i)}return t},getByRange:function(e,t){for(var n=[],i=0;i<t;i++)n.push(i+e);return this.getByIds(n)}}),t.exports=o},{"../lib/lang.js":"lang"}],16:[function(e,t,n){var i=e("zepto"),o=e("../lib/lang.js"),r=e("./model.js"),s=e("./view.js"),a=e("../setting.js"),c=e("./parser/parser.js"),l=window.Data.messager,u=o.createClass(function(e){this.config=i.extend(!0,{},e),this.init()},{type:"doc_reader"});u.extend({init:function(e){this.currentPn=0,this.initDocInfo=window.Data.docInfo||{},this.initStatus=!0,this.config.parser=c,this.startPage=this.config.startPage,this.toPage=this.config.toPage||1,this.initModel(),this.initView(),this.initEvents()},initModel:function(){var e=this.config;this.model=new r({docId:e.docId,host:e.host,token:e.token,totalPageNum:e.totalPageNum}),this.config.model=this.model,this.fetch()},initView:function(){this.view=new s(this.config)},initEvents:function(){var e=this,t="1";e.current={page:e.startPage,percent:0},e.view.on("pageChange",i.proxy(this.pageChange,this)),e.view.on("pageRenderHeight",i.proxy(this.pageRenderHeight,this)),e.view.on("noticeUser",i.proxy(this.noticeUser,this)),i(window).on("hashchange",function(){var n=window.Data.docInfo||{};if(location.hash){var i=location.hash.match(/=(\d)*/g)[0].substring(1);if(console.log(typeof+i),1!==+i&&setTimeout(function(){e.scrollToPage(i,n)},250),l)l.request("setDataLogs",{data:{event:"all",pn:i}}),t=i;else if(n&&n.flip&&"function"==typeof n.flip){var o={event:"all",pn:i};n.flip(o),t=i}}}),i(window).on("scroll",i.throttle(250,i.proxy(this.getCurrentPage,this))),l&&l.response("setScrollTop",function(t){e.getCurrentPage(t)})},noticeFlip:function(e){var t=window.Data.docInfo||{};if(l)l.request("setDataLogs",{data:{event:"all",pn:e}}),prePn=e;else if(t&&t.flip&&"function"==typeof t.flip){var n={event:"all",pn:e};t.flip(n),prePn=e}},getCurrentPage:function(e){var t,n=this,o=e.scrollTop||window.scrollY,r=i(".page .bd");r.each(function(r,s){var a=e.scrollTop-e.top||i(".reader-doc")[0].offsetTop,c=i(s).parent(".page").get(0).offsetTop,l=i(s).parent(".page").get(0).offsetHeight;if(c+a<=o&&c+a+l>o){var u=i(s).parent(".page").get(0).className;return t=/page-no-(\d+)/g.exec(u)[1],t!==n.currentPn&&(n.currentPn=t,n.noticeFlip(n.currentPn)),!1}})},jumpToInitPage:function(){var e=this,t=e.initDocInfo&&e.initDocInfo.pn?e.initDocInfo.pn:0,n=location.hash?location.hash.match(/=(\d)*/g)[0].substring(1):0,i=t?t:n;e.initStatus&&i&&setTimeout(function(){e.scrollToPage(i,t),e.initStatus=!1},250)},scrollToPage:function(e,t){var n=(window.Data.docInfo||{},i(".pre-btn"),i(".page-no-"+e).offset().top||0);t&&!l?window.scrollTo(0,n):l.request("flipScroll",{data:{top:n+2}})},pageRenderHeight:function(){this.jumpToInitPage(),l&&l.request("setHeight",{data:{height:i(".reader").height()}})},noticeUser:function(){var e=this.initDocInfo;e&&e.reGetToken&&"function"==typeof e.reGetToken&&e.reGetToken("page load success")},pageChange:function(e,t){this.current=t,this.fire("pageChange")},fetch:function(){var e=this;this.defer=new i.Deferred,this.model.getData({pn:this.config.startPage||1}).then(function(){e.view.lazyload(),e.defer.resolve(e);var t=e.toPage,n=e.startPage;t&&t>=n&&t<=n-1+a.rn&&(e.gotoPage(t),e.toPage=null)})},gotoPage:function(e){var t=e-(e-1)%a.rn;t>this.config.totalPageNum&&(t=1),t===this.config.startPage?this.view.gotoPage(e):this.reset({startPage:t,toPage:e})},reset:function(e){this.startPage!==e.startPage&&(this.startPage=e.startPage,this.toPage=e.toPage||null,this.view.distory(),this.config=i.extend(this.config,e),this.fetch(),this.initView(),this.current={page:this.startPage,percent:0},this.view.on("pageChange",i.proxy(this.pageChange,this)),this.view.on("pageRenderHeight",i.proxy(this.pageRenderHeight,this)),i(window).on("scroll",i.throttle(250,i.proxy(this.getCurrentPage,this))))},ready:function(e){this.defer.then(e)}}),t.exports=u},{"../lib/lang.js":"lang","../setting.js":53,"./model.js":18,"./parser/parser.js":20,"./view.js":33,zepto:"zepto"}],17:[function(e,t,n){var i=e("../lib/widget.js").widget,o=e("../zoom/zoom.js").Zoom,r=e("../lib/preloadimg.js"),s=e("zepto"),a=e("./tmpl/imageview.tmpl.js"),c=i({elements:{".imageview .bd":"$bd",".imageview":"$imageview"},_render:function(){this.$el.append(a())},_initEvents:function(){var e=this;e.counter=0,e.singleTime=0,e.doubleTime=0,e.on("onload",function(){console.log("onload error"),e.img=new r({loading:s.proxy(e.loading,e),onload:s.proxy(e.loaded,e),onerror:s.proxy(e.onerror,e),src:e.options.src}),setTimeout(function(){try{e.createHammer(e.$elements.$bd.get(0)).on("tap",s.proxy(e.tapHandle,e))}catch(t){}},300),this.$el.find(".mask").height(document.body.offsetHeight),console.log(this.$el.find(".mask").height())})},loading:function(){this.$elements.$bd.addClass("loading")},loaded:function(e,t){var n=this.$elements.$bd.removeClass("loading"),i=s(e).attr("js-hook","zoom-element");n.html(i),this.zoom=new o({el:this.$elements.$bd})},tapHandle:function(e){var t=this,n=e.target;e.stopPropagation(),t.counter++,t.counter%2==0?t.doubleTime=e.timeStamp:t.singleTime=e.timeStamp,setTimeout(function(){if(t.counter%2==0&&t.doubleTime-t.singleTime<250){if("img"===n.tagName.toLowerCase())return}else t.fire("dispose"),t.dispose(),t.counter=0,t.singleTime=0,t.doubleTime=0},300)},dispose:function(){i._method.dispose.apply(this),s(".imageview",document.body).remove()},onerror:function(){}});t.exports=c},{"../lib/preloadimg.js":38,"../lib/widget.js":39,"../zoom/zoom.js":66,"./tmpl/imageview.tmpl.js":30,zepto:"zepto"}],18:[function(e,t,n){var i=e("../lib/lang.js"),o=e("../getContent.js"),r=e("../setting.js"),s=e("./cache.js"),a=e("zepto"),c=i.createClass(function(e){this.config=e||{},console.log("m",this.config),this.init()},{type:"doc_model",superClass:o});c.extend({init:function(){this.docId=this.config.docId,this.host=this.config.host,this.token=this.config.token},cache:new s,parse:function(e){return 0===e.status.code?e.data:null},getData:function(e){var t=this,n=t.cache,i=new a.Deferred,o=t.findFromCache(e.pn,r.rn);return o&&o.length?(setTimeout(function(){for(var e=0;e<o.length;e++)t.fire("add",{model:t,item:o[e]});i.resolve(o)},100),i.promise()):(t.fetch({pn:e.pn,rn:e.rn||r.rn,host:this.host,token:this.token}).done(function(e){for(var o=e.length,r=0;r<o;r++)n.set(e[r]),t.fire("add",{model:t,item:e[r]});i.resolve(e)}),i.promise())},findFromCache:function(e,t){return this.cache.getByRange(e,t)}}),t.exports=c},{"../getContent.js":34,"../lib/lang.js":"lang","../setting.js":53,"./cache.js":15,zepto:"zepto"}],19:[function(e,t,n){var i=e("../lib/widget.js").widget,o=e("../lib/util.js"),r=e("zepto"),s=e("./tmpl/page.tmpl.js"),a=i({parser:{},_init:function(){this.pn=this.options.pn},_render:function(){this.$pageEl=r('<div class="page page-no-'+o.escape(this.options.pn)+'" style="min-height: 130px"><p class="cont-loading">加载中...</p></div>').appendTo(this.$el)},parse:function(e){this.$pageEl.append(s({content:e,parser:this.parser,pn:this.pn,totalPageNum:this.options.totalPageNum,options:this.options})),1===this.pn&&this.$pageEl.find(".hd").addClass("title").append("<h1>"+o.escape(this.options.docTitle)+"</h1>").append('<p class="total">页数:'+this.options.totalPageNum+"</p>")},current:function(e){var t=this.$pageEl.offset().top,n=this.$pageEl.height(),i=t+n;if(!(e<t||e>i))return{page:this.pn,percent:(e-t)/n}},distory:function(){this.$pageEl.remove()}},{prfix:"doc_page",type:"doc_page"});t.exports=a},{"../lib/util.js":"util","../lib/widget.js":39,"./tmpl/page.tmpl.js":31,zepto:"zepto"}],20:[function(e,t,n){t.exports=[e("./txt.js"),e("./pic.js")]},{"./pic.js":21,"./txt.js":22}],21:[function(e,t,n){var i=e("../../dep/zepto.js"),o=e("../../lib/util.js"),r=e("../../setting.js"),s=e("config"),a=function(e,t,n,a){var c,l,u=1===i(".page").length&&1===a.length,a=e.c,p=280,f=a.iw,d=a.ih;f>=d?(c=f>=p?p:f,l=~~(c*d/f)):(l=d>=p?p:d,c=~~(l*f/d));var h={doc_id:n.docId,token:n.token,host:n.host,pn:t,rn:n.rn||r.rn,type:"zoom",x:a.ix,y:a.iy,raww:f,rawh:d,aimh:u?null:l,o:e.o,contentType:"pic",https:s.https},g=i.extend(!0,{},h);delete g.aimh;var m=s.getContentPath().indexOf("?")!=-1?"&":"?",v=s.getContentPath()+m+o.escape(i.param(g)),w=s.getContentPath()+m+o.escape(i.param(h)),y=window.Data.docInfo.fileDir,x=e.o.split("_")[0];y&&(v=w="file://"+y+"/"+x+"/"+t+"_"+a.ix+"_"+a.iy+"_"+a.iw+"_"+a.ih+"."+x);var b=document.getElementsByClassName("page-no-1")[0],_=b&&b.getBoundingClientRect().width-40||l,j=_/f*d;return'<div class="img-wrap" data-big-url="'+v+'"  style="height:'+(u?j:l)+'px;"><p  class="loading" style="height:'+l+'px" data-url="'+w+'" ></p><div class="img-zoom" style="right:'+(p/2-c/2+15)+'px;"></div></div>';
},c=function(e){this.parser.pic=a};t.exports=c},{"../../dep/zepto.js":"zepto","../../lib/util.js":"util","../../setting.js":53,config:"config"}],22:[function(e,t,n){var i=e("../../lib/util.js"),o=function(e){return"<p>"+i.escape(e.c)+"</p>"},r=function(e){this.parser.txt=o};t.exports=r},{"../../lib/util.js":"util"}],23:[function(e,t,n){var i=e("zepto"),o=e("../lib/widget.js").widget,r=e("./tmpl/scrollbar.tmpl.js"),s=o({Options:{el:i(document.body),initPercent:0},events:{"$thumb touchstart":"captrue"},elements:{".scrollbar-thumb":"$thumb",".scrollbar-track":"$track",".scrollbar":"$scrollbar",".scrollbar-tip-text":"$scrollbarTiptext"},template:function(){return r()},_render:function(){var e=i(this.template()).appendTo(this.$el);this.on("onload",function(){this.resize(),e.find(".scrollbar-thumb").css({top:this.options.initPercent*e.height()}),this.percent=this.options.initPercent})},_initEvents:function(){var e=this;i(window).on("resize",function(){e.resize(),e.setTop(e.$el.height()*e.percent)})},resize:function(){var e=this,t=this.$el.height(),n=30;if(e.$elements.$scrollbar){var i=e.$elements.$scrollbar,o=.05*t;i.css({top:o,width:n,height:t-o-50})}},captrue:function(e){e.preventDefault(),e.stopPropagation();var t=this,n=i.proxy(t.moveHanlder,t);t.fire("scrollStart"),i(document).on("touchmove",n),i(document).one("touchend",function(){t.fire("scrollEnd",{percent:t.percent}),t.hide(),i(document).off("touchmove",n)})},moveHanlder:function(e){var t=this.$elements.$scrollbar.offset().top-i(window).scrollTop();t=e.touches[0].clientY-t,this.setTop(t)},setTop:function(e,t){var n=this;if(t=t||{},this.$elements.$track){var i=this.$elements.$track.height()-this.$elements.$thumb.height();e=Math.min(i,e),e=Math.max(0,e),n.top=e,n.percent=e/i,n.$elements.$thumb.css("top",e),t.slient||setTimeout(function(){n.fire("scrollChange",{percent:n.percent})},16)}},setTopWithPercent:function(e,t){var n=this.$elements.$track.height(),i=e*n;t=t||{},this.setTop(i,t)},show:function(){this.$elements.$scrollbar.css({right:0})},hide:function(){this.$elements.$scrollbar.css({right:-9999})}});t.exports=s},{"../lib/widget.js":39,"./tmpl/scrollbar.tmpl.js":32,zepto:"zepto"}],24:[function(e,t,n){var i=e("zepto"),o=e("./gethash.js"),r=e("./getstartpage.js"),s={},a=function(e,t){s.page=r(+e.docInfo.totalPageNum,+o().page),i(window).on("hashchange",function(t){var n=o(),i=r(+e.docInfo.totalPageNum,+o().page);s.page!==i&&(s.page=i,n.toPage&&(i=n.toPage),e._reader.gotoPage(i)),s.img!==n.img&&(s.img=n.img,n.img?e.fire("imageViewShow",{src:n.img}):e.fire("imageViewHide"))}),t()};t.exports=a},{"./gethash.js":28,"./getstartpage.js":29,zepto:"zepto"}],25:[function(e,t,n){var i=e("../imageview.js"),o=e("./gethash.js"),r=e("zepto"),s=null,a=function(e){s=new i({el:r(document.body),src:unescape(e.img)}),s.on("dispose",function(){s=null,delete e.img,location.hash="#/?"+r.param(e)})},c=function(e,t){var n=o();n.img&&a(n),e.on("imageViewShow",function(e,t){s&&(!s.disposed&&s.dispose(),s=null);var n=o();n.img=t.src,a(n)}),e.on("imageViewHide",function(e,t){s&&(!s.disposed&&s.dispose(),s=null)}),t()};t.exports=c},{"../imageview.js":17,"./gethash.js":28,zepto:"zepto"}],26:[function(e,t,n){var i=e("../doc.js"),o=e("./getstartpage.js"),r=e("./gethash.js"),s=e("zepto"),a=function(e,t){var n=e.docInfo,a=+r().page,c=e.fontSize||"middle",l=e.backgroundColor||"#fff",u=/^#[0-9a-fA-F]{3}$/g,p=/^#[0-9a-fA-F]{6}$/g,f=s(".reader");["small","middle","big"].indexOf(c)>=0&&f.addClass("font-size-"+c),(u.test(l)||p.test(l))&&f.css("background-color",l),"dulearn"===(e.config||{}).userSide?n.pn?(window.history?history.replaceState("#/?page="+n.pn,{}):location.hash="#/?page="+n.pn,a=n.pn):a?window.history?history.replaceState("#/?page="+a,{}):location.hash="#/?page="+a:(window.history?history.replaceState("#/?page=1",{}):location.hash="#/?page=1",a=1):n.pn?(location.hash="#/?page="+n.pn,a=n.pn):a?location.hash="#/?page="+a:(location.hash="#/?page=1",a=1);var d=+o(+n.totalPageNum,a);console.log("r",n);var h=new i({docId:n.doc_id,host:e.host,token:e.token,totalPageNum:+n.totalPageNum,docTitle:n.docTitle,createUser:n.createUser,el:s(".reader").eq(0),startPage:d});e._reader=h,e.reader=h,t()};t.exports=a},{"../doc.js":16,"./gethash.js":28,"./getstartpage.js":29,zepto:"zepto"}],27:[function(e,t,n){var i=e("../scrollbar.js"),o=e("../../lib/util.js"),r=e("./gethash.js"),s=(e("./getstartpage.js"),e("zepto")),a=e("../../dep/hammer.js"),c=e("config"),l=function(e,t){function n(e){if(d)return void d.request("imageViewShow",{data:{src:e}});var t=location.hash.replace("#/",""),n=o.query2JSON(t);n.img=e,t=s.param(n),location.hash="#/?"+t,console.log(t)}var l=r().page||1,u=e.docInfo,p=u.totalPageNum,f=(e.reader,s('<div class="scrollbar-wrap" style="height:'+document.documentElement.offsetHeight+'px;"></div>').appendTo("body")),d=(new i({initPercent:(l-1)/p,el:f}),window.Data.messager),h=new a(document);h.on("tap",function(e){var t=s(e.target);if(t.is("img")||t.is(".img-zoom")){var i=t.parents(".img-wrap").attr("data-big-url");if("opencloud"==c.tag){var o=window.Data.docInfo.fileDir;if(o)i&&n(i);else{var r=1===s(".page").length&&1===s(".page-no-1 .img-wrap").length;if(r)return;i&&s.ajax({url:i,dataType:"jsonp",success:function(e){e&&n(e)}})}}else i&&n(i)}else;}),t()};t.exports=l},{"../../dep/hammer.js":6,"../../lib/util.js":"util","../scrollbar.js":23,"./gethash.js":28,"./getstartpage.js":29,config:"config",zepto:"zepto"}],28:[function(e,t,n){var i=e("../../lib/util.js"),o=function(e){return e=e||location.hash,e=e.replace("#/",""),i.query2JSON(e)};t.exports=o},{"../../lib/util.js":"util"}],29:[function(e,t,n){var i=e("../../setting.js"),o=function(e,t){var n=t||1;return n=t-(t-1)%i.rn,n>e&&(n=1),n};t.exports=o},{"../../setting.js":53}],30:[function(require,module,exports){var string=require("string"),_={};_.escape=string.escapeHTML,module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="imageview">\n    <div class="hd"></div>\n    <div class="mask"></div>\n    <div class="bd loading">\n    </div>\n</div>\n';return __p}},{string:"string"}],31:[function(require,module,exports){var string=require("string"),_={};_.escape=string.escapeHTML,module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){__p+='<div class="hd"></div>\n<div class="bd">\n';for(var i=0;i<content.length;i++){__p+="\n    ";var row=content[i];__p+="\n    "+(null==(__t=parser[row.t]&&parser[row.t](row,pn,options,content))?"":__t)+"\n"}__p+='\n</div>\n<div class="ft">\n    '+(null==(__t=pn)?"":__t)+"/"+(null==(__t=totalPageNum)?"":__t)+"\n</div>\n"}return __p}},{string:"string"}],32:[function(require,module,exports){var string=require("string"),_={};_.escape=string.escapeHTML,module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="scrollbar">\n    <div class="scrollbar-track"></div>\n    <div class="scrollbar-thumb">\n        <div class="scrollbar-tip">\n            <div class="scrollbar-tip-text"></div>\n            <div class="scrollbar-tip-arrow">\n            </div>\n        </div>\n    </div>\n</div>\n';return __p}},{string:"string"}],33:[function(e,t,n){var i=e("../lib/widget.js").widget,o=e("./page.js"),r=e("../setting.js"),s=e("../lib/widget.js").register,a=e("./bookmark.js"),c=e("../dep/zepto.js"),l=e("../dep/hammer.js");e("../dep/imglazyload.js");var u=i({pages:{},_init:function(){this.messager=window.Data.messager,this.model=this.options.model;for(var e=0;e<this.options.parser.length;e++)s(o,this.options.parser[e])},_render:function(){this.$el.addClass("reader-doc");for(var e=this.options.totalPageNum,t=this.options.startPage||1,n=Math.min(t+r.rn-1,e),i=t;i<=n;i++)this.pages[i]=new o({pn:i,el:this.options.el,totalPageNum:e,docTitle:this.options.docTitle,createUser:this.options.createUser,host:this.options.host,token:this.options.token,docId:this.options.docId});this._setButton(t,e)},_setButton:function(e,t){var n="",i="";1===e||(n='<a class="pre-btn" href="#/?page='+(e-1)+'">上一页</a>'),e+r.rn-1>=t||(i='<a class="next-btn" href="#/?page='+(e+r.rn)+'">下一页</a>'),this.$el.prepend('<div class="btn-block">'+n+"</div>"),this.$el.append('<div class="btn-block">'+i+"</div>")},_initEvents:function(){var e=this,t=e.model,n=new l(document);t.on("add",function(t,n){var i=n.item;e.renderPage(i.page,i.parags),e.$el.find(".btn-block").show()}),e.scrollHanlde=c.proxy(function(){var t,n=document.body.scrollTop;for(var i in e.pages)if(e.pages.hasOwnProperty(i)&&(t=e.pages[i].current(n)))break;t||(t=n<e.$el.find(".page").eq(0).offset().top?{page:1,precent:0}:{page:e.options.totalPageNum,precent:1}),a.set(e.options.docId,t.page),e.fire("pageChange",t)},e),c(window).on("scroll",e.scrollHanlde),n.on("click",function(t){var n=c(t.target),i=window.Data.messager;!n.is(".next-btn")&&!n.is(".pre-btn")||n.is(".disable")||i&&i.request("flipScroll"),n.is(".tip-close")&&e.$el.find(".tip-page").hide()})},renderPage:function(e,t){c(".cont-loading").css("display","none"),this.pages[e]&&(this.pages[e].parse(t),this.fire("pageRenderHeight"),this.fire("noticeUser"))},gotoPage:function(e){var t=this,n=this.pages[e];window.scrollTo(0,n.$pageEl.offset().top),setTimeout(function(){t.fire("pageChange",{page:e,percent:0})},16)},lazyload:function(){c(".img-wrap p").imglazyload({threshold:500}).on("loadcomplete",function(e,t){var n=1===c(".page").length&&1===c(".page-no-1 .img-wrap").length;t.img.height()>50&&!n&&t.img.parents(".img-wrap").find(".img-zoom").show(),t=null}).on("loadcomplete error",function(e){e.preventDefault()}),c(window).trigger("scrollStop"),c(window).on("scroll",c.debounce(80,function(){c(window).trigger("scrollStop")},!1))},distory:function(){this.model.un(),c(window).off("scroll",this.scrollhanlde);for(var e in this.pages)this.pages.hasOwnProperty(e)&&(this.pages[e].distory(),delete this.pages[e]);this.$el.children().remove(),this.dispose()}},{prefix:"doc_view",type:"doc_view"});t.exports=u},{"../dep/hammer.js":6,"../dep/imglazyload.js":8,"../dep/zepto.js":"zepto","../lib/widget.js":39,"../setting.js":53,"./bookmark.js":14,"./page.js":19}],34:[function(e,t,n){var i=e("zepto"),o=(e("./setting.js"),e("./lib/lang.js")),r=e("./xpc.js"),s=e("getFileJsonp"),a=e("config"),c=o.createClass(function(e){this.config=e||{}},{type:"content"});c.extend({requestType:"merge",loader:new r,fetch:function(){var e;return function(t){e&&e.abort();var n=this;t=t||{};var o=t.pn||1,r=t.rn||1,c=new i.Deferred,l=window.Data.docInfo.fileDir,u=window.Data.docInfo.docType,p=a.https;return n.requestType="txt"===u?u:n.requestType,l?s({fileDir:l}).getContent({pn:o,rn:r}):(e=n.loader.send({url:a.getContentPath(),data:{doc_id:n.config.docId,token:n.config.token,host:n.config.host,pn:o,rn:r,type:t.requestType||n.requestType,getcontent:1,https:p},dataType:"jsonp"}).done(function(e){return(e=n.parse(e))?void c.resolve(e):void c.reject(e)}).fail(function(e){c.reject(e)}).always(function(){e=null}),c.promise())}}(),parse:function(e){return e},dispose:function(){this.loader.dispose(),o.Class.prototype.dispose.apply(this)}}),t.exports=c},{"./lib/lang.js":"lang","./setting.js":53,"./xpc.js":64,config:"config",getFileJsonp:"getFileJsonp",zepto:"zepto"}],35:[function(e,t,n){var i=e("./util.js"),o=function(e){return e=e||location.hash,e=e.replace("#/",""),i.query2JSON(e)};t.exports=o},{"./util.js":"util"}],36:[function(e,t,n){var i=e("./lang.js"),o=e("../dep/zepto_extend.js"),r=function(e){return!!e.hasOwnProperty("callee")},s={isPromise:function(e){return!!(i.isObject(e)&&e.hasOwnProperty("promise")&&i.isFunction(e.promise))},getDeferred:function(e){if(!r(e))throw new Error("getDeferred arguments error.");if(e.callee.hasOwnProperty("_dfd")&&!i.isObject(e.callee._dfd))throw new Error("getDeferred arguments have not deferred");return e.callee._dfd},when:function(e){var t=this,n=[].slice.call(arguments,0),i=[];return o.each(n,function(e,n){i.push(t.fire.call(t,n))}),o.when.apply(o,i)},fire:function(e,t){i.isString(e)&&(e=new i.Event(e)),!this.__listeners&&(this.__listeners={}),t=t||{};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);var r,s,a,c,l=this,u=l.__listeners,p=e.type,f=new o.Deferred;if(e.target=e.target||(e.currentTarget=l),p.indexOf("on")&&(p="on"+p),"function"==typeof l[p]&&l[p].apply(l,arguments),"object"==typeof u[p])for(n=0,r=u[p].length;n<r;n++)s=u[p][n],s._dfd=f,a=s.apply(l,arguments),this.isPromise(a)&&(c=a);return c||e.returnValue}};n.mediator=i.createSingle(s)},{"../dep/zepto_extend.js":13,"./lang.js":"lang"}],37:[function(e,t,n){t.exports=function(){function e(e,t){var n="";if(arguments.length<2?n="target error - target and name are both requied":"object"!=typeof e?n="target error - target itself must be window object":"string"!=typeof t&&(n="target error - target name must be string type"),n)throw new Error(n);this.target=e,this.name=t}function t(e,t){this.targets={},this.name=e,this.listenFunc=[],n=t||n,"string"!=typeof n&&(n=n.toString()),this.initListen()}var n="[PROJECT_NAME]",i="postMessage"in window;return i?e.prototype.send=function(e){this.target.postMessage(n+e,"*")}:e.prototype.send=function(e){var t=window.navigator[n+this.name];if("function"!=typeof t)throw new Error("target callback function is not defined");t(n+e,window)},t.prototype.addTarget=function(t,n){var i=new e(t,n);this.targets[n]=i},t.prototype.initListen=function(){var e=this,t=function(t){"object"==typeof t&&t.data&&(t=t.data),t=t.slice(n.length);for(var i=0;i<e.listenFunc.length;i++)e.listenFunc[i](t)};i?"addEventListener"in document?window.addEventListener("message",t,!1):"attachEvent"in document&&window.attachEvent("onmessage",t):window.navigator[n+this.name]=t},t.prototype.listen=function(e){this.listenFunc.push(e)},t.prototype.clear=function(){this.listenFunc=[]},t.prototype.send=function(e){var t,n=this.targets;for(t in n)n.hasOwnProperty(t)&&n[t].send(e)},t}()},{}],38:[function(e,t,n){var i=function(e){return"[object Function]"===Object.prototype.toString.call(e)},o=function(e){var t=new Image,n=function(n){return function(){t.onload=t.onerror=t.onabout=null,n(t,e)}};try{if(!e.src)throw new Error("options.src is null")}catch(o){console.log(o)}return i(e.loading)&&e.loading(e),i(e.onload)&&(t.onload=n(e.onload)),i(e.onerror)&&(t.onerror=t.onabout=n(e.onerror)),t.src=t.originalSrc=e.src,t};t.exports=o},{}],39:[function(e,t,n){var i=e("../dep/zepto_extend.js"),o=e("../dep/hammer.js"),r=e("./lang.js"),s=e("./util.js"),a=function(){},c=function(e,t){t=i.extend(!0,{prefix:"widget",type:"",superClass:r.Class},t||{});var n=t.superClass,o=n.prototype;e=i.extend(!0,{el:o.el||"",elements:o.elements||{},events:o.events||{},Options:o.Options||{}},e||{});var s=function(n){var o=this,a=arguments;n=n||{},o.$el=null,o.$elements={},o.options=i.extend(!0,{},e.Options,n),o.type=t.type,o.prefix=t.prefix,o._created=!1,o._disabledStatus=!1,o._hammerEventStack=[],o.on("onload",function(){o._created=!0,o._disabledStatus=!0,(!o.$el||o.$el.length<1)&&(o.$el=i(o.options.el)),o.$el.data(o.prefix,this);var e=o.$el.data(o.prefix+"-options");o.options=i.extend(!0,o.options,e),o.refreshElements(),o._bindEvents(o.events)}),r.isFunction(o._init)&&o._init.apply(o,a),s.$$plugins&&i.each(s.$$plugins,function(e,t){t.apply(o,a)}),o.$el=i(o.options.el),r.isFunction(o._render)&&(o._render(),o._initEvents()),setTimeout(function(){o.fire("onload")},16)};r.inherits(s,n);var l=r.isFunction(e._init)?e._init:a,u=n===r.Class?r.Class:o._init;return e._init=function(){var e=arguments,t=this;r.isFunction(u)&&u.apply(t,e),r.isFunction(l)&&l.apply(t,e)},s.extend(i.extend(!0,{},c._method,e)),s};c._method={_bindEvents:function(e){var t=this;return e=e||t.events,!!r.isObject(e)&&void i.each(e,function(e,n){var i,o,r,s=e.split(/\s+/);if(!(n in t))throw new Error("缺少"+n+"事件函数");switch(s.length){case 3:i=t.$elements[s[0]],o=s[1],r=s[2];break;case 2:s[0].match(/^\$/)?(i=t.$elements[s[0]],o=s[1]):(i=t.$el,o=s[0],r=s[1]);break;case 1:i=t.$el,o=s[0]}r?t.bindEvent(i,o,r,n):t.bindEvent(i,o,n)})},bindEvent:function(e,t,n,o){var s=this,a=arguments,c=s.type+"_"+s.guid;return 3===a.length&&(o=n,n=null),r.isString(o)&&(o=s[o]),o=i.proxy(o,s),t=t.split(","),t=i.map(t,function(e,t){return e+"."+c}),t=t.join(" "),n?i(e).on(t,n,o):i(e).on(t,o),this},unBindEvent:function(e,t,n,o){var s=this,a=arguments,c=s.type+"_"+s.guid;3===a.length&&(o=n,n=null),r.isString(o)&&(o=s[o]),o&&(o=i.proxy(o,s)),t=t.split(","),t=i.map(t,function(e,t){return e+"."+c}),t=t.join(" "),n?i(e).off(t,n,o):i(e).off(t,o)},dispose:function(){var e=this,t=e.type+"_"+e.guid;i.each(e._hammerEventStack,function(e,t){try{t.destroy()}catch(n){}}),e.$el.off("."+t),e.$el.find("*").off("."+t),e.$el.removeData(e.prefix+"-options"),e.fire("ondispose")&&r.Class.prototype.dispose.call(e)},_setStatus:function(e){return e?(this._disabledStatus=!0,this.$el.addClass(this.type+"-disabled ui-state-disabled")):(this._disabledStatus=!1,this.$el.removeClass(this.type+"-disabled ui-state-disabled")),this},setDisable:function(){return this._setStatus(!0),this.fire("disable"),this},setEnable:function(){return this._setStatus(!1),this.fire("enable"),this},getStatus:function(){return this._disabledStatus},refreshElements:function(e){var t,n,o,r=this,s=e||r.elements,a=[];for(t in s)s.hasOwnProperty(t)&&(n=s[t],o=t.match(/^@([-_\w]+)/),o&&o.length>1?a.push(r.$elements[n]=r.getHookElement(o[1])):a.push(r.$elements[n]=i(t,this.$el)));return a},getData:function(e){var t=this,n=t.prefix+"_"+t.guid,i=t.$el.data(n+"-options");return i.hasOwnProperty(e)?i[e]:null},setData:function(e,t){var n=this,i=n.prefix+"_"+n.guid,o=n.$el.data(i+"-options")||{};return o[e]=t,n.$el.data(i+"-options",o),n},getHookElement:function(e){return i("[js-hook="+e+"]",this.$el)},createHammer:function(e,t){var n=new o(e,t);return this._hammerEventStack.push(n),n},getEl:function(){return this.$el},_render:function(){},_initEvents:function(){}},c._method=i.extend({},c._method,s.zIndexManager),n.widget=c;var l=function(e,t,n){var i,o=e.$$plugins||(e.$$plugins=[]);o[o.length]=t;for(i in n)n.hasOwnProperty(i)&&(e.prototype[i]=n[i])};n.register=l},{"../dep/hammer.js":6,"../dep/zepto_extend.js":13,"./lang.js":"lang","./util.js":"util"}],40:[function(e,t,n){var i=e("../dep/zepto_extend.js"),o=e("../lib/widget.js"),r=o.widget,s=e("./loading.tmpl.js"),a=r({Options:{defaultWrapClassName:"ui-loading",defaultContent:"加载中"},elements:{"@content":"$content"},_init:function(){},_initEvents:function(){var e=this;e.on("ondispose",function(){e.$el.remove()})},_render:function(){this.$el=i(s(this.options))},appendTo:function(e){var t=i(e);t.append(this.$el)},hide:function(){this.$el.hide()},show:function(){this.$el.show()},setContent:function(e){this.$elements.$content.html(e)}},{type:"loading"});n.Loading=a},{"../dep/zepto_extend.js":13,"../lib/widget.js":39,"./loading.tmpl.js":41}],41:[function(require,module,exports){var string=require("string"),_={};_.escape=string.escapeHTML,module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="'+(null==(__t=defaultWrapClassName)?"":__t)+'">\n        <span class="icon"></span><span class="label" js-hook="content">'+(null==(__t=defaultContent)?"":__t)+"</span>\n</div>\n";return __p}},{string:"string"}],42:[function(e,t,n){var i=e("../../dep/zepto_extend.js"),o=e("../../lib/widget.js"),r=o.widget,s=e("./home.tmpl.js"),a=r({Options:{totalPageNum:1,title:""},_init:function(){},_initEvents:function(){var e=this;e.on("ondispose",function(){e.$el.remove()})},_render:function(){this.$el=i(s(this.options))},appendTo:function(e){var t=i(e);t.append(this.$el),this.bringToFront(this.$el)}},{type:"home"});n.Home=a},{"../../dep/zepto_extend.js":13,"../../lib/widget.js":39,"./home.tmpl.js":43}],43:[function(require,module,exports){var string=require("string"),_={};_.escape=string.escapeHTML,module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="ui-home-wrap">\n    <h1 class="ui-home-title">'+(null==(__t=title)?"":__t)+'</h1>\n    <p class="ui-home-desc"><span class="ui-home-pagenum">共'+(null==(__t=totalPageNum)?"":__t)+'页</span></p>\n    <p class="ui-home-tip">横屏看ppt效果更佳；双击可放大查看；右滑查看下一页</p>\n</div>\n';return __p}},{string:"string"}],44:[function(e,t,n){var i=(e("../dep/zepto_extend.js"),e("../lib/mediator.js").mediator),o=e("./store/info.js").infoStore,r=e("./store/content.js").contentStore,s=e("./view/view.js").View,a=e("../setting.js"),c=function(e){var t=new s({el:e.el,Mediator:i});a.isPPT=!0,t.on("onload",function(){o(i,e),r(i,e),i.fire("v:createLoading"),i.when("s:getInfo","s:getContent").then(function(e,t){i.fire("v:destoryLoading");var n=window.Data.docInfo;i.fire("v:createViews",{totalPageNum:n.totalPageNum,title:n.docTitle,content:t})}),i.on("v:createSwipeItemView",function(e,t){var n=t.index;i.fire("s:getContent",{pn:n}).then(function(e){i.fire("v:createZoomView",{element:t.element,index:t.index,src:e})})}),i.on("v:setDataLogs",function(e,t){var n=window.Data.docInfo||{};t.pn=t.pn-1,window.Data.messager?window.Data.messager.request("setDataLogs",{data:t}):n&&n.flip&&"function"==typeof n.flip&&n.flip(t)})})};t.exports=c},{"../dep/zepto_extend.js":13,"../lib/mediator.js":36,"../setting.js":53,"./store/content.js":45,"./store/info.js":46,"./view/view.js":47}],45:[function(e,t,n){var i=e("../../dep/zepto_extend.js"),o=e("../../getContent.js"),r=e("config"),s=window.Data.docInfo,a=e("../../lib/gethash.js"),c={},l=function(e,t){var n=new o({docId:t.docId,token:t.token,host:t.host}),l=function(e,t){return n.fetch({pn:e,rn:t,requestType:"ppt"})},u=function(e,t){var n=new i.Deferred;if(r.token)return c[e]?(n.resolve(c),n.promise()):l(e,t)};e.on("s:getContent",function(n){var o=s?s.pn:a()?+a().page:0,r=n.pn||o||1,l=n.rn||10,p=arguments,f=e.getDeferred(p);return u(r,l).then(function(e){if(e.hasOwnProperty("status")){if(!i.isArray(e.data))throw new Error("s:getContent data error, pn is "+r);var n=function(e,t){return t+"9999"};e.data.forEach(function(e,i){var o=e.zoom;t.fileDir||(o=o.replace(/(raww=)\d+/g,n)),c[e.page]=o})}f.resolve(c[r])}).fail(function(t){e.fire("error",{msg:"getInfo",error:t})}),f.promise()})};n.contentStore=l},{"../../dep/zepto_extend.js":13,"../../getContent.js":34,"../../lib/gethash.js":35,config:"config"}],46:[function(e,t,n){var i=e("config"),o=function(e,t){e.on("s:getInfo",function(){var t=arguments,n=e.getDeferred(t);return n.resolve(i),n.promise()})};n.infoStore=o},{config:"config"}],47:[function(e,t,n){var i=e("../../dep/zepto_extend.js"),o=e("../../lib/widget.js"),r=e("../../lib/preloadimg.js"),s=e("../../swipeview/swipeview.js").Swipeview,a=e("../../select/select.js").Select,c=e("../zoomview/zoomview.js").ZoomView,l=e("../home/home.js").Home,u=o.widget,p=e("../../loading/loading.js").Loading,f=e("./view.tmpl.js"),d=u({Options:{totalPageNum:1,title:"",zoomWidth:1440,zoomHeight:810,prevDisableContent:"已到最前",nextDisableContent:"已到最后",prevContent:"上一页",nextContent:"下一页"},elements:{"@select":"$select","@prev":"$prev","@next":"$next","@toolsbar":"$toolsbar","@swipeview":"$swipeview","@page-num":"$pageNum","@page-option":"$pageOption","@page-count":"$pageCount"},_init:function(){var e=this;e.zoomList=[],e.currentIndex=0,e.Mediator=e.options.Mediator,e.$elements.$window=i(window),e.slideStartDeltaX=0,e.isSlide=!1,e.toolsbarIsShow=!1,e.timer=null},_initEvents:function(){var e=this;e.on("onload",function(){e.setSwipeViewHeight(e.$elements.$window.height()),setTimeout(function(){var t=e.createHammer(e.$elements.$prev[0]);t.on("tap",function(){e.swipeview.prev(!0)});var n=e.createHammer(e.$elements.$next[0]);n.on("tap",function(){e.swipeview.next(!0)})},1e3)}),e.bindEvent(e.$elements.$window,"ortchange resize",i.throttle(function(){e.setSwipeViewHeight(e.$elements.$window.height())})),e.on("dispose",function(){e.unBindEvent(e.$elements.$window,"ortchange resize")}),e.Mediator.on("v:createLoading",function(){e.createLoadingView(),e.$elements.$toolsbar.hide(),e.$elements.$pageNum.hide()}),e.Mediator.on("v:destoryLoading",function(){e.destoryLoadingView(),e.$elements.$pageNum.show()}),e.Mediator.on("v:createViews",function(t){e.options.totalPageNum=t.totalPageNum,e.options.title=t.title,e.createSelectView(),e.createSwipeView(t),e.setPageOption(1),e.setPageCount()}),e.on("createSwipeItemView",function(t,n){e.Mediator.fire("v:createSwipeItemView",n)}),e.on("setDataLogs",function(t,n){e.Mediator.fire("v:setDataLogs",n)}),e.Mediator.on("v:createZoomView",i.proxy(e.createZoomView,e))},_render:function(){this.$el.html(f(this.options))},setSwipeViewHeight:function(e){this.$elements.$swipeview&&this.$elements.$swipeview.css({height:e+"px","line-height":e+"px"})},setPageOption:function(e){this.$elements.$pageOption.html(e-1)},setPageCount:function(){this.$elements.$pageCount.html(this.options.totalPageNum)},setPagePrev:function(e){this.$elements.$prev.html(e)},setPageNext:function(e){this.$elements.$next.html(e)},createSelectView:function(){for(var e=this,t=e.options.totalPageNum,n=[],i=0,o=t;i<o;i++)n[i]={key:i+1,val:i+1};e.selectView=new a({el:e.$elements.$select,selectOptions:n}),e.selectView.on("onChange",function(t,n){var i=+n.value;i!==e.swipeview.getPaneIndex()&&e.swipeview.showPane(i)})},createSwipeView:function(e){var t=this;t.swipeview=new s({paneCount:t.options.totalPageNum,el:t.$elements.$swipeview}),t.swipeview.on("showPane",i.proxy(t._showPane,t)),t.swipeview.on("createView",i.proxy(t._createSwipeItemView,t)),t.swipeview.on("reGetContent",i.proxy(t._reGetContent,t)),t.swipeview._eventHandler=function(){};var n=t.createHammer(t.swipeview.getEl()[0],{dragLockToAxis:!0});n.on("touch pinch drag dragend doubletap release swipe transformstart transformend tap",i.proxy(t._eventHandler,t))},_showPane:function(e,t){var n=this;n.$elements.$pageOption.html(t.index),n.selectView.setSelectedIndex(t.index),n.fire("setDataLogs",{event:"all",pn:t.index+1}),1!==t.index?n.setPagePrev(n.options.prevContent):n.setPagePrev(n.options.prevDisableContent),t.index!==n.options.totalPageNum?n.setPageNext(n.options.nextContent):n.setPageNext(n.options.nextDisableContent)},_createSwipeItemView:function(e){var t=this,n=e.element,i=e.index;return 0!==~~i&&void t.fire("createSwipeItemView",{index:i,element:n})},_reGetContent:function(e){var t=this,n=e.index,i=e.item;t.Mediator.fire("v:createSwipeItemView",{index:n,element:i})},createHome:function(e){var t=this;t.home=new l({totalPageNum:t.options.totalPageNum,title:t.options.title}),t.home.appendTo(e),t._createZoomItem({el:e,index:0,hookElement:t.home.getEl()})},createZoomView:function(e){var t=this;r({src:e.src,loading:i.proxy(t.zoomLoading,t),onload:i.proxy(t.zoomOnload,t),onError:i.proxy(t.zoomOnError,t),index:e.index,element:e.element})},_createZoomItem:function(e){var t=this,n=t.zoomList[e.index]=new c({el:e.el,elementWidth:t.options.zoomWidth,elementHeight:t.options.zoomHeight,index:e.index});n.setHookElement(e.hookElement),n.on("pinched",function(e,n){t.isSlide=!1}),n.on("draged",function(e){var n=e.gesture,i=e.zoomAction,o=1,r=t.swipeview;(0===r.getPaneIndex()&&n.deltaX>0||r.currentPane===r.paneCount-1&&n.deltaX<0)&&(o=.4),i?(t.isSlide=!1,t.slideStartDeltaX=n.deltaX):(t.isSlide=!0,t.swipeview.drag(n,o,t.slideStartDeltaX))})},zoomLoading:function(e){i(e.element).html('<img src="images/loader.gif" />')},zoomOnload:function(e,t){var n=this,o=i(t.element);o.html('<img style="visibility:hidden; vertical-align: middle;" js-hook="zoom-element" src="'+t.src+'"/>');var r=o.find("img");n._createZoomItem({index:t.index,el:t.element,hookElement:r}),n.swipeview.fire("verifySwipItem"),i(window).trigger("noticeUser")},zoomOnError:function(e){i(e.element).html('<img src="'+__inline("./images/error.gif")+'" />')},createLoadingView:function(){var e=this;e.loading=new p,e.loading.appendTo(e.$el)},destoryLoadingView:function(){this.loading.dispose()},resetPane:function(){var e=this,t=e.swipeview,n=e.zoomList;i.each(n,function(e,n){try{e!==t.getPaneIndex()&&n.resetTranslate(n.getZoomElement())}catch(i){}})},isToolsBarElementShow:function(){return!("none"===this.$elements.$toolsbar.css("display"))},prevSwipeView:function(){this.swipeview.prev()},nextSwipeview:function(){this.swipeview.next()},_release:function(e){var t=this,n=t.swipeview.paneWidth;Math.abs(e.deltaX)>n/2?"right"===e.direction?t.swipeview.prev(!0):t.swipeview.next(!0):t.swipeview.showPane(t.swipeview.options.index,!0)},_eventHandler:function(e){var t=this,n=e.gesture,o=e.target,r=i(o).parent('[js-hook="swipeview-pane"]'),s=!!r.data("widget"),a=s?r.data("index"):0;switch(n.preventDefault(),e.type){case"touch":t.toolsbarIsShow=!0,s&&t.zoomList[a].touch();break;case"pinch":t.isSlide||s&&t.zoomList[a].pinch(n);break;case"drag":clearTimeout(t.timer),t.toolsbarIsShow=!1,t.$elements.$toolsbar.hide(),t.zoomList[a].drag(n);break;case"dragend":t.zoomList[a].release(n);break;case"doubletap":clearTimeout(t.timer),t.toolsbarIsShow=!1,t.$elements.$toolsbar.hide(),s&&t.zoomList[a].doubleTap(n);break;case"swipe":t.resetPane();break;case"release":t.isSlide&&t.swipeview.release(n),t.slideStartDeltaX=0,t.resetPane(),t.isSlide=!1;break;case"transformstart":s&&t.zoomList[a].transformStart();break;case"transformend":t.zoomList[a].transformEnd(n);break;case"tap":t.timer=setTimeout(function(){t.toolsbarIsShow&&!t.isToolsBarElementShow()?t.$elements.$toolsbar.show():(t.toolsbarIsShow=!1,t.$elements.$toolsbar.hide())},250)}}});n.View=d},{"../../dep/zepto_extend.js":13,"../../lib/preloadimg.js":38,"../../lib/widget.js":39,"../../loading/loading.js":40,"../../select/select.js":51,"../../swipeview/swipeview.js":55,"../home/home.js":42,"../zoomview/zoomview.js":49,"./view.tmpl.js":48}],48:[function(require,module,exports){var string=require("string"),_={};_.escape=string.escapeHTML,module.exports=function(obj){obj||(obj={});var __t,__p="";with(obj)__p+='<div class="ui-ppt">\n    <div class="ui-ppt__swipeview" js-hook="swipeview">\n    </div>\n    <div class="ui-ppt__toolsbar" js-hook="toolsbar">\n        <div class="ui-ppt__page-item ui-ppt__page-prev" js-hook="prev">\n        </div>\n        <div class="ui-ppt__page-item ui-ppt__page-next" js-hook="next">\n        </div>\n        <div class="ui-ppt__page-item ui-ppt__page-select" js-hook="select">\n        </div>\n    </div>\n    <div class="ui-ppt__pagenum" js-hook="page-num">\n        <div class="ui-ppt__pagenum-box">\n            <span class="ui-ppt__pagenum-option" js-hook="page-option"></span>/<span class="ui-ppt_pagenum-count" js-hook="page-count"></span>页\n        </div>\n    </div>\n</div>\n';return __p}},{string:"string"}],49:[function(e,t,n){var i=e("../../dep/zepto_extend.js"),o=e("../../lib/widget.js"),r=o.widget,s=e("../../zoom/zoom.js").Zoom,a=e("../../zoom/reflow.js").Reflow,c=r({Options:{elementWidth:100,elementHeight:100,contentElement:null,index:0},_init:function(){var e=this;e.options.contentElement&&(e.setHookElement(e.options.contentElement),e.$elements.$zoomElement.css("visibility","hidden"))},_initEvents:function(){var e=this;e.on("onload",function(){try{e.resetTranslate(e.$elements.$zoomElement),e.$el.data("index",e.options.index)}catch(t){}}),e.on("resized",function(){e.$elements.$zoomElement.css("visibility","visible")})},setHookElement:function(e){var t=i(e).attr("js-hook","zoom-element");this.$elements.$zoomElement=t}},{type:"zoomview",superClass:s});o.register(c,a,a.prototype),n.ZoomView=c},{"../../dep/zepto_extend.js":13,"../../lib/widget.js":39,"../../zoom/reflow.js":65,"../../zoom/zoom.js":66}],50:[function(e,t,n){var i=e("../lib/widget.js"),o=e("../dep/zepto.js"),r=i.widget,s=r({elements:{"@select":"$select","@label":"$label","@select-wrap":"$selectWrap","@select-option":"$selectOption","@select-count":"$selectCount"},_init:function(){},_initEvents:function(){var e=this;e.on("load",function(){var t=e.createHammer(e.$elements.$select[0]);t.on("focus blur change",o.proxy(e._eventHandler,e))}),e.on("onChange",function(t,n){var i=n.value;e.$elements.$selectOption.html(i)})},_eventHandler:function(e){var t=this;switch(e.preventDefault(),e.type){case"focus":t._focus();break;case"blur":t._blur();break;
case"change":t._change()}},addOption:function(e,t){return this.$elements.$select[0].options.add(new Option(e,t)),this},active:function(){this.$elements.$select[0].focus()},_change:function(e){var t=this.$elements.$select;this.fire("onChange",t[0].options[t[0].selectedIndex])},_blur:function(){var e=this.$elements.$select;this.fire("onBlur",e[0].options[e[0].selectedIndex])},_focus:function(){var e=this.$elements.$select;this.fire("onFocus",e[0].options[e[0].selectedIndex])},removeOption:function(e){this.$elements.$select[0].options.remove(e)},setSelectedIndex:function(e){var t=this.$elements.$select;t[0].selectedIndex=e-1,this.fire("onChange",t[0].options[t[0].selectedIndex])},getSelect:function(){return this.$elements.$select}},{type:"select"});n.Control=s},{"../dep/zepto.js":"zepto","../lib/widget.js":39}],51:[function(e,t,n){var i=e("../lib/widget.js"),o=i.widget,r=e("./select.tmpl.js"),s=e("./control.js").Control,a=o({Options:{selectOptions:[],defaultLabelClassName:"ui-select-label",defaultWrapClassName:"ui-select-wrap",defaultOptionsClassName:"ui-select-options",defaultCountClassName:"ui-select-count",defaultSelectClassName:"ui-select",wrapClassName:"",defaultOptions:0},_init:function(){var e=this;e.options.selectId=e.type+"_"+e.guid},_initEvents:function(){var e=this;a.superClass._initEvents.call(this),e.on("ondispose",function(){e.$el.remove()})},_render:function(){this.$el.html(r(this.options))}},{superClass:s,type:"select"});n.Select=a},{"../lib/widget.js":39,"./control.js":50,"./select.tmpl.js":52}],52:[function(require,module,exports){var string=require("string"),_={};_.escape=string.escapeHTML,module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){__p+='<label class="'+(null==(__t=defaultLabelClassName)?"":__t)+'" for="'+(null==(__t=selectId)?"":__t)+'" js-hook="label">\n    <div class="'+(null==(__t=defaultWrapClassName)?"":__t)+" "+(null==(__t=wrapClassName)?"":__t)+'" js-hook="select-wrap">\n        <span class="'+(null==(__t=defaultOptionsClassName)?"":__t)+'" js-hook="select-option">\n            '+(null==(__t=selectOptions[defaultOptions].key)?"":__t)+'\n        </span>\n        /\n        <span class="'+(null==(__t=defaultCountClassName)?"":__t)+'" js-hook="select-count">\n            '+(null==(__t=selectOptions.length)?"":__t)+'\n        </span>\n        页\n        <span class="ui-icon-sp">\n        </span>\n    </div>\n     <select class="'+(null==(__t=defaultSelectClassName)?"":__t)+'" id="'+(null==(__t=selectId)?"":__t)+'" js-hook="select">\n        ';for(var i=0;i<selectOptions.length;i++)__p+="\n            ",__p+=defaultOptions===i?'\n            <option checked="checked" value="'+(null==(__t=selectOptions[i].val)?"":__t)+'">'+(null==(__t=selectOptions[i].key)?"":__t)+"</option>\n            ":'\n            <option value="'+(null==(__t=selectOptions[i].val)?"":__t)+'">'+(null==(__t=selectOptions[i].key)?"":__t)+"</option>\n            ",__p+="\n        ";__p+='\n    </select>\n    <span class="ui-icon-sp"></span>\n</label>\n'}return __p}},{string:"string"}],53:[function(e,t,n){var i=e("config");t.exports={url:{GETTOKEN_INTERFACE:i.getTokenUrl(),GETCONTENT_INTERFACE:i.getContentPath(),GETDOCINFO_INTERFACE:i.getDocInfoUrl()},rn:5,cacheCount:15,isPPT:!1}},{config:"config"}],54:[function(e,t,n){var i=e("../dep/zepto_extend.js"),o=e("../lib/widget.js"),r=e("../lib/lang.js"),s=window.Data.docInfo,a=e("../lib/gethash.js"),c=o.widget,l=c({Options:{paneCount:0,index:1,panePadding:10,swipeRaido:.01},elements:{"@swipeview-pane":"$swipeviewPane","@swipeview-wrap":"$swipeviewWrap"},_init:function(){this.offset=0,this.$elements.$window=i(window),this.paneCount=this.options.paneCount},_initEvents:function(){var e=this;e.on("load",function(){e._setPaneDimensions(),e.paneCount=e.options.paneCount||e.$elements.$swipeviewPane.length;var t=s?+s.pn:a()?+a().page:0;e.showPane(t||e.options.index)}),e.on("load",function(){var t=e.createHammer(e.$el[0],{dragLockToAxis:!0});t.on("tap release dragleft dragright swipeleft swiperight",i.proxy(e._eventHandler,e))}),e.bindEvent(window,"ortchange resize",i.throttle(function(){e._setPaneDimensions(),e.showPane(e.options.index,!1)})),e.on("dispose",function(){e.unBindEvent(window,"ortchange resize")})},_eventHandler:function(e){var t=this,n=e.gesture,i=1;switch(n.preventDefault(),e.type){case"dragright":case"dragleft":(0===t.options.index&&e.gesture.deltaX>0||t.options.index===t.paneCount-1&&e.gesture.deltaX<0)&&(i=.4),t.drag(n,i);break;case"swipeleft":t.swipe("next",n),e.gesture.stopDetect();break;case"swiperight":t.swipe("prev",n),e.gesture.stopDetect();break;case"release":t.release(n),e.gesture.stopDetect();break;case"tap":t.tap(n),e.gesture.stopDetect()}},getPanes:function(){return this.refreshElements({"@swipeview-pane":"$swipeviewPane"}),this.$elements.$swipeviewPane},getWrap:function(){return this.refreshElements({"@swipeview-wrap":"$swipeviewWrap"}),this.$elements.$swipeviewWrap},getPaneWidth:function(e){var t=this;return(e-1)*t.paneWidth+(e-1)*t.options.panePadding},_setPaneDimensions:function(){var e=this,t=this.getPanes();e.paneWidth=t.width();var n=s?s.pn:a()?+a().page:0;t.each(function(t,o){var r=i(o),s=n?n+t:t+1,a=r.data("index")||s;r.css("left",e.getPaneWidth(a)+"px")})},showPane:function(e,t,n){var i,o=this;e=Math.max(1,Math.min(e,o.paneCount)),o.options.index=e,i=0-o.getPaneWidth(e),o.offset=i,o._setOffset(parseInt(i,10),t,n),o.fire("showPane",{index:e,offset:i})},_setOffset:function(e,t,n){var o=this;o.removeAnimate(),t&&o.addAnimate(n),o.$elements.$swipeviewWrap.css(i.fx.cssPrefix+"transform","translate"+(i.support.has3d?"3d(":"(")+e+"px,0,0) scale3d(1, 1, 1)")},addAnimate:function(e){e=(e||".3")+"s",this.$elements.$swipeviewWrap.css(i.fx.cssPrefix+"transition","all "+e)},removeAnimate:function(){this.$elements.$swipeviewWrap.css(i.fx.cssPrefix+"transition","all 0s")},next:function(e,t){var n=this;n.showPane(n.options.index+1,e,t),n.fire("next",n.options.index)},prev:function(e,t){var n=this;n.showPane(n.options.index-1,e,t),n.fire("prev",n.options.index)},drag:function(e,t,n){t=t||1,n=n||0,this._setOffset(e.deltaX*t-n+this.offset),this.fire("drag",e.deltaX*t-n)},swipe:function(e,t){if(!r.isString(e)||"prev next".indexOf(e)===-1)throw new Error("swipe direction Error");var n=Math.abs(Math.floor(400-100*t.velocityX)/1e3);this[e](!0,n)},release:function(e){var t=this;t.paneWidth;t.calculateRatio(e)>=t.options.swipeRaido?"right"===e.direction?t.prev(!0):t.next(!0):t.showPane(t.options.index,!0)},tap:function(e){var t=this,n=t.$elements.$window.width(),i=Math.floor(n/3),o=e.touches[0].clientX;if(o>i&&o<2*i)return void t.fire("tap",{pos:"center"})},getPaneIndex:function(){return this.options.index},getTranslate:function(){var e=this.$elements.$swipeviewWrap,t=e.css(i.fx.cssPrefix+"transform"),n=t.match(/translate(3d)?\((.*?)\)/),o=0,r=0;return n&&(n=n[2].split(","),o=parseInt(n[0],10),r=parseInt(n[1],10)),{x:o,y:r}},calculateRatio:function(e){var t=this,n=t.paneWidth,i=t.getTranslate(),o=(Math.abs(i.x)/n).toFixed(2);return"left"===e.direction?1-Number("0."+o.split(".")[1]):Number("0."+o.split(".")[1])}},{type:"swipeview"});n.Control=l},{"../dep/zepto_extend.js":13,"../lib/gethash.js":35,"../lib/lang.js":"lang","../lib/widget.js":39}],55:[function(e,t,n){var i=e("../dep/zepto_extend.js"),o=e("../lib/widget.js"),r=e("./swipeview.tmpl.js"),s=e("./control.js").Control,a=window.Data.docInfo,c=e("../lib/gethash.js"),l=o.widget,u=l({Options:{elClassName:"",paneClassName:"",defaultPaneClassName:"ui-swipeview-pane",defaultWrapClassName:"ui-swipeview",paneCount:1},_init:function(){var e=this,t=e.options.index,n=0===t||t===e.options.paneCount?2:3;e.options.initPane=Math.min(n,e.options.paneCount)},_initEvents:function(){var e=this;u.superClass._initEvents.call(e),e.on("onload",function(){e._initView(),e.on("showPane",function(t,n){e.createView(n.index)})}),e.on("ondispose",function(){e.$el.remove()}),e.on("verifySwipItem",function(){var t=e.getPanes();t.each(function(t,n){var o=i(n),r=o.children("img");if(!r.length){var s=o.data("index");e.fire("reGetContent",{index:s,item:o})}})})},_render:function(){this.$el.html(r(this.options))},_initView:function(){var e=this;e.refreshElements();var t=e.$elements.$swipeviewPane,n=a?+a.pn:c()?+c().page:0,o=parseInt(n||e.options.index,10);t.each(function(t,n){var r=o,s=i(n);o++,s.data("index",r),e.fire("createView",{element:s,index:r})})},createView:function(e){var t=this;if(e=parseInt(e,10),e>t.paneCount)return!1;var n=t.getPanes(),o=t._getStack(e);n.each(function(e,n){var r=o.indexOf(+i(n).data("index"));r>-1?o.splice(r,1):(t.fire("removeView",n),i(n).remove())}),i(o).each(function(e,i){var o=n[0].cloneNode();t._createPane(o,i)})},_getStack:function(e){var t=parseInt(this.paneCount,10),n=[];return n=0===t?[e]:0===e?[e,e+1]:e===t?[e-1,e]:[e-1,e,e+1]},_createPane:function(e,t){var n=this,o=i(e),r=n.getPaneWidth(t);o.css({left:r+"px"}).data("index",t),o[0].className=n.options.defaultPaneClassName+" "+n.options.paneClassName,n.$elements.$swipeviewWrap.append(o),n.fire("createView",{element:o,index:t})}},{superClass:s,type:"swipeview"});n.Swipeview=u,n.Control=s},{"../dep/zepto_extend.js":13,"../lib/gethash.js":35,"../lib/widget.js":39,"./control.js":54,"./swipeview.tmpl.js":56}],56:[function(require,module,exports){var string=require("string"),_={};_.escape=string.escapeHTML,module.exports=function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__j=Array.prototype.join;with(obj){__p+='<ul class="'+(null==(__t=defaultWrapClassName)?"":__t)+" "+(null==(__t=elClassName)?"":__t)+'" js-hook="swipeview-wrap">\n\t';for(var i=0;i<initPane;i++)__p+='\n\t<li class="'+(null==(__t=defaultPaneClassName)?"":__t)+"  "+(null==(__t=paneClassName)?"":__t)+'" js-hook="swipeview-pane"></li>\n\t';__p+="\n</ul>\n"}return __p}},{string:"string"}],57:[function(e,t,n){var i=e("doc"),o=e("ppt"),r=e("config"),s=e("zepto");t.exports=function(e,t){r.readerEl=s('<div class="wenku-reader-wrap"></div>').appendTo(r.container);var n=e.docInfo.docType;"ppt"===n||"pptx"===n||"pot"===n||"dps"===n||"pps"===n?e.reader=o(e):e.reader=i(e),t()}},{config:"config",doc:"doc",ppt:"ppt",zepto:"zepto"}],58:[function(e,t,n){var i=e("zepto"),o=e("config");t.exports=function(e,t){i.ajax({url:o.getBcsUrlPath(),data:{doc_id:o.docId,pn:o.getStartPn(),rn:50,token:o.token,host:o.host},dataType:"jsonp"}).done(function(n){e.htmlUrls=n.data.htmlUrls,t()}).fail(function(){throw new Error("getbcsurl error!")})}},{config:"config",zepto:"zepto"}],59:[function(e,t,n){var i=e("zepto"),o=null,r=e("config");if(parent!==self){var s=e("messengerExt");o=new s("WENKU_WAP_READER"),o.addTarget(parent.window,"WENKU_WAP_API")}window.Data=window.Data||{},t.exports=function(e,t){if(o){var n=!!window.location.href.match(/https=true/);r.https=n,o.request("iframeReady",{callBack:function(n){i.extend(r,n),e.config=r,console.log("configconfig",r),t()}})}}},{config:"config",messengerExt:"messengerExt",zepto:"zepto"}],60:[function(e,t,n){function i(e){var t;switch(e){case"xls":case"xlsx":case"wps":case"et":case"dps":case"vsd":case"rtf":case"pdf":case"docx":case"doc":case"epub":t="doc";break;case"txt":t="txt";break;case"ppt":case"pptx":case"pot":case"pps":t="ppt";break;case"default":t="doc"}return t}var o=e("zepto"),r=e("config");t.exports=function(e,t){o.ajax({url:r.getDocInfoUrl(),data:{idlist:r.docId,host:r.host,https:r.https,token:e.token,type:"json"},dataType:"jsonp"}).then(function(n){if(n.status&&0==n.status.code){var s=n.data[r.docId],a={};a=s,a.docTitle=s.title,a.createUser=s.uname,a.viewCount=s.viewCount,a.totalPageNum=+s.page,a.docType=i(s.type),window.Wenku&&(a.pn=window.Wenku.pn?window.Wenku.pn:1,a.flip=window.Wenku.flip?window.Wenku.flip:null,a.reGetToken=window.Wenku.reGetToken?window.Wenku.reGetToken:null,a.totalPageNum=window.Wenku.previewPageNum?window.Wenku.previewPageNum:+s.page,a.https=!!window.Wenku.https),a.pn>a.totalPageNum&&(a.pn=a.totalPageNum),e.docInfo=a,window.Data.docInfo=o.extend({},a),t()}else r.reGetToken&&"function"==typeof r.reGetToken&&r.reGetToken(n.status.msg)},function(){throw r.reGetToken&&"function"==typeof r.reGetToken&&r.reGetToken("invalid token"),new Error("getDocInfo error")})}},{config:"config",zepto:"zepto"}],61:[function(e,t,n){var i=e("zepto"),o=e("config");window.Data=window.Data||{},t.exports=function(e,t){i.extend(o,window.Wenku),e.config=o,window.Wenku.fileDir&&window.Wenku.pn>window.Wenku.totalPageNum&&(window.Wenku.pn=window.Wenku.totalPageNum),e.token=window.Wenku.token,e.host=window.Wenku.host,e.docInfo=window.Wenku,window.Data.docInfo=window.Wenku,t()}},{config:"config",zepto:"zepto"}],62:[function(e,t,n){var i=e("zepto"),o=e("config");t.exports=function(e,t){i.ajax({url:o.getPowerUrl(),data:{host:o.host,token:o.token,https:o.https},dataType:"jsonp"}).done(function(n){n.status&&0==n.status.code&&(e.power=n.data.power,t())}).fail(function(){throw new Error("getpower error!")})}},{config:"config",zepto:"zepto"}],63:[function(e,t,n){var i=e("token"),o=e("config");t.exports=function(e,t){if(o.token)e.token=o.token,e.host=o.host,t();else{var n=new i({host:o.host,secretKey:o.secretKey,https:o.https});n.get(o.getTokenUrl()).then(function(n){if(0===n.status.code)return e.token=n.data.token,e.host=o.host,o.token=n.data.token,void t()},function(){throw new Error("getToken error")})}}},{config:"config",token:"token"}],64:[function(e,t,n){var i=e("./dep/zepto.js"),o=e("./lib/lang.js"),r=e("./lib/util.js"),s=o.createClass(function(e){this.config=e||{},this.init()},{type:"xpc"});s.send=function(e){return i.ajax(e)},s.extend({init:function(){this.stack=[],this.retryCount=this.config.retryCount||3},send:function(e){var t,n=this,o=n.retryCount,a=new i.Deferred,c=e.error,l=e.success,u=this.stack.length,p=r.uniqueId("xpc_jsonpCallback_"),f=!1,d=function(t){f||(o--,o>0?n.stack[u]=s.send(e):(n.stack.splice(u,1),c&&c.apply(this,t),a.reject(t)))};e.success=function(e){n.stack.splice(u,1),l&&l.call(this,e),a.resolve(e)},e.error=function(e){d.call(this,e)},e.jsonpCallback=p,t=s.send(e),n.stack.push(t);var h=a.promise();return h.abort=function(){f=!0;var e=n.stack[u];e.abort(),window[p]=function(){}},h},dispose:function(){for(var e=this,t=0;t<e.stack.length;t++)try{e.stack[t].abort()}catch(n){}e.stack=[],o.Class.prototype.dispose.apply(this)}}),t.exports=s},{"./dep/zepto.js":"zepto","./lib/lang.js":"lang","./lib/util.js":"util"}],65:[function(e,t,n){var i=e("../dep/zepto_extend.js"),o=function(){var e=this;e.on("onload",function(){e.resize(document.body);try{e.resetTranslate(e.$elements.$zoomElement)}catch(t){}}),e.bindEvent(window,"ortchange resize",i.throttle(function(){e.resize(document.body);try{e.resetTranslate(e.$elements.$zoomElement)}catch(t){}})),e.on("dispose",function(){e.unBindEvent(window,"ortchange resize")})};o.prototype.resize=function(e){var t=this,n=t.$elements.$zoomElement,o=n.width()||t.options.elementWidth,r=n.height()||t.options.elementHeight,s=i(e).width(),a=i(e).height(),c=i(e).find(".imageview").height(),l=1,u=1,p=1;s<o&&(l=s/o),a<r&&(u=a/r),p=Math.min(l,u),o*=p,r*=p,t.$el.css({"line-height":c+"px"}),n.css({width:o+"px",height:r+"px"}),t.fire("resized")},n.Reflow=o},{"../dep/zepto_extend.js":13}],66:[function(e,t,n){var i=e("../dep/zepto_extend.js"),o=e("../lib/widget.js"),r=o.widget,s=e("./reflow.js").Reflow,a=r({Options:{startScale:1,maxScale:3,minScale:1,doubleTapScale:2,elementWidth:null,elementHeight:null},elements:{"@zoom-element":"$zoomElement"},_init:function(){var e=this;e.currentScale=e.options.startScale,e.pinchStartScale=e.currentScale,e.startingTranslate={x:0,y:0},e.translate={x:0,y:0},e.hasDrag=!0,e.zoomAction=!1,e.$elements.$window=i(window)},_initEvents:function(){var e=this;e.on("onload",function(){try{e.resetTranslate(e.$elements.$zoomElement)}catch(t){}}),e.on("onload",function(){var t=e.createHammer(e.$elements.$zoomElement[0]);t.on("touch drag dragend pinch doubletap transformstart transformend",i.proxy(e._eventHandler,e))})},_eventHandler:function(e){var t=this,n=e.gesture;switch(n.preventDefault(),e.type){case"touch":t.touch(n),t.removeAnimate();break;case"pinch":t.pinch(n);break;case"drag":t.drag(n);break;case"dragend":t.release(n);break;case"doubletap":t.doubleTap(n);break;case"transformstart":t.transformStart(n);break;case"transformend":t.transformEnd(n)}},resetTranslate:function(e,t){t=t||this.options.startScale,this.startingTranslate.x=0,this.startingTranslate.y=0,this._setTranslate(e,0,0,t)},_setTranslate:function(e,t,n,o){var r=this,s=i.os.android&&parseFloat(i.os.version)<4||!i.support.has3d?"scale("+o+") translate("+t+"px, "+n+"px)":"scale("+o+") translate3d("+t+"px, "+n+"px, 0px)",a=i(e);a.css(i.fx.cssPrefix+"transform",s),r.translate.x=t,r.translate.y=n,r.currentScale=o},_getTranslate:function(e){e=e||this.$elements.$zoomElement;var t=i(e),n=t.css(i.fx.cssPrefix+"transform"),o=n.match(/translate(3d)?\((.*?)\)/),r=0,s=0;return o&&(o=o[2].split(","),r=parseInt(o[0],10),s=parseInt(o[1],10)),{x:r,y:s}},setPosition:function(e){var t=this,n=t.currentScale,i=e.deltaX/n,o=e.deltaY/n,r=t.$elements.$window,s=t.$elements.$zoomElement,a=r.width()/2,c=r.height()/2,l=s.width()/2,u=s.height()/2,p=l-a,f=u-c,d=t.startingTranslate.x+i,h=t.startingTranslate.y+o;Math.abs(d*n)>=p?(d=t.translate.x,t.zoomAction=!1):t.zoomAction=!0,Math.abs(h*n)>=f&&(h=t.startingTranslate.y+.4*o),n<=t.options.minScale&&(d=0,h=0),t._setTranslate(s,d,h,n)},touch:function(){var e=this._getTranslate(this.$elements.$zoomElement);this.startingTranslate.x=e.x,this.startingTranslate.y=e.y,this.removeAnimate()},drag:function(e){var t=this;return!!this.hasDrag&&(t.removeAnimate(),t.setPosition(e),void t.fire("draged",{zoomAction:t.zoomAction,gesture:e}))},pinch:function(e){var t=this,n=t.currentScale,i=t.options.maxScale,o=t.options.minScale,r=t.startingTranslate.x,s=t.startingTranslate.y;t.hasDrag=!1,clearTimeout(t.dragTime),n=t.pinchStartScale*e.scale,n>i&&(n=i),n<.8*o&&(n=.8*o),t._setTranslate(t.$elements.$zoomElement,r,s,n),t.dragTime=setTimeout(function(){t.hasDrag=!0},100),t.fire("pinched",n)},release:function(e){var t=this,n=0,i=0,o=.4,r=t.$elements.$zoomElement,s=t.$elements.$window,a=(r.width()-s.width())/2,c=(r.height()-s.height())/2,l=!0;e?(i=(e.deltaY>0?1:-1)*e.velocityY*e.deltaTime*o+t.translate.y,n=(e.deltaX>0?1:-1)*e.velocityX*e.deltaTime*o+t.translate.x):(i=t.translate.y,n=t.translate.x),c>0?Math.abs(i*t.currentScale)>=c&&(i=(i>0?1:-1)*c/t.currentScale):(t.currentScale<t.options.minScale&&(t.currentScale=t.options.minScale,l=!1),i=0),a>0?Math.abs(n*t.currentScale)>=a&&(n=(n>0?1:-1)*a/t.currentScale):(t.currentScale<t.options.minScale&&(t.currentScale=t.options.minScale,l=!1),n=0),!this.hasDrag&&e&&l||(this._setTranslate(r,n,i,t.currentScale),this.addAnimate())},doubleTap:function(){var e,t=this,n=t.$elements.$zoomElement;this.addAnimate(),t.isScale()?t.currentScale=e=t.options.startScale:t.currentScale=e=t.options.doubleTapScale;try{t.resetTranslate(n,e),t.fire("pinched",e)}catch(i){}},transformStart:function(){this.pinchStartScale=this.currentScale},transformEnd:function(e){this.release(e)},removeAnimate:function(){this.$elements.$zoomElement.removeClass("ui-zoomview-animate")},addAnimate:function(){this.$elements.$zoomElement.addClass("ui-zoomview-animate")},getZoomElement:function(){return this.$elements.$zoomElement},isScale:function(){return this.currentScale>this.options.startScale}},{type:"zoom"});o.register(a,s,s.prototype),n.Zoom=a},{"../dep/zepto_extend.js":13,"../lib/widget.js":39,"./reflow.js":65}],config:[function(e,t,n){var i={host:"wenku.baidu.com",secretKey:"6f614cb00c6b6821e3cdc85ab1f8f907",serverHost:"http://wenku.baidu.com",apiPath:"/api/interface/",tokenPath:"gettoken",docInfoPath:"getdocinfo",powerPath:"getpower",downloadPath:"download",checkquotaPath:"checkquota",bcsUrlPath:"gethtml",getcontentPath:"getcontent",width:700,rn:1,pn:1,cacheCount:15,isPPT:!1,container:document.body};i.getApiPath=function(){return this.serverHost+this.apiPath},i.getTokenUrl=function(){return i.getApiPath()+this.tokenPath},i.getDocInfoUrl=function(){return i.getApiPath()+this.docInfoPath},i.getPowerUrl=function(){return i.getApiPath()+this.powerPath},i.getCheckquotaPath=function(){return i.getApiPath()+this.checkquotaPath},i.getDownloadPath=function(){return i.getApiPath()+this.downloadPath},i.getBcsUrlPath=function(){return i.getApiPath()+this.bcsUrlPath},i.getContentPath=function(){return i.getApiPath()+this.getcontentPath},i.getStartPn=function(){return 1},t.exports=i},{}],doc:[function(e,t,n){var i=e("zepto"),o=e("taskrunner"),r=null;if(parent!==self){var s=e("messengerExt");e("../dep/imglazyload.js"),r=new s("WENKU_WAP_READER"),r.addTarget(parent.window,"WENKU_WAP_API")}window.Data.messager=r;var a=function(e){var e=parseFloat(e,10);if(!(!e||e>2||e<0)){var t=i("#fontSizeStyle");t.length?t.html(".doc-reader .reader-doc .bd p{ font-size:"+e+"em;}"):i("head").append('<style id="fontSizeStyle">.doc-reader .reader-doc .bd p{ font-size:'+e+"em; line-height: 1.3}</style>")}};t.exports=function(t){i("body").addClass("doc-reader");var n=new o;n.add(e("./task/createreader.js")),n.add(e("./task/createscrollbar.js")),n.add(e("./task/createimageview.js")),n.add(e("./task/bindhash.js")),n.run(function(e){e.reader.ready(function(){if(r){var e=0,t=function(){r.request("setHeight",{data:{height:i(".reader").height()}})};t(),r.request("readerReady"),r.response("setScrollTop",function(t){e=t.scrollTop,i.fn.imglazyload.setCurrentOffset(t),i.fn.imglazyload.detect()}),r.response("swipeup",function(e){var t=Math.abs(e.height-e.bottom)<50;t&&i(".next-btn").click()}),r.response("swipedown",function(e){var t=Math.abs(0-e.top)<50;t&&i(".pre-btn").click()}),r.response("setFontSize",function(e){var n=e.size;a(n),requestAnimationFrame(function(){t()})}),r.response("setFontColor",function(e){var t=e.color;if(/^\#[0-9a-fA-F]{3,6}$/.test(t)){var n=t.length;if(4===n||7===n){var o=i("#fontColorStyle");o.length?o.html(".reader-doc .bd p{ color:"+t+";}.reader-doc .hd.title h1{ color:"+t+";}"):i("head").append('<style id="fontColorStyle">.reader-doc .hd.title h1{ color:'+t+";}.reader-doc .bd p{ color:"+t+";}</style>")}}}),r.response("setBackgroundColor",function(e){var t=e.backgroundColor;if(/^\#[0-9a-fA-F]{3,6}$/.test(t)){var n=t.length;4!==n&&7!==n||i(".reader").css({"background-color":t})}})}else window.setFontSize=a})},function(e){e=t})}},{"../dep/imglazyload.js":8,"./task/bindhash.js":24,"./task/createimageview.js":25,"./task/createreader.js":26,"./task/createscrollbar.js":27,messengerExt:"messengerExt",taskrunner:"taskrunner",zepto:"zepto"}],getFileJsonp:[function(e,t,n){var i=e("zepto"),o=e("./setting.js"),r=function(e){function t(e,t,n){var o="wenku_"+e,r=c+e+".json?jsonpCallback=?";return window["wenku_"+e]=t,i.ajaxJSONP({url:r,jsonpCallback:o}).fail(n(e))}function n(e){var t=e.list,n=e.index,i=e.deferred,r=e.length,s=e.pn;return function(e){if(o.isPPT){var c=o.imgUrl=a+"/jpg/",l=e[0].parags[0].c;t[n]={zoom:c+s+"_0_0_"+l.iw+"_"+l.ih+".jpg",page:s}}else t[n]=e[0];t.length===r&&(o.isPPT&&(t={status:"",data:t}),i.resolve(t))}}function r(e){return function(e){throw new Error("getFileJsonp error")}}var s=e.fileDir,a="file://"+s,c=a+"/json/";return{getContent:function(e){var o,s=~~e.pn,a=~~e.rn,c=new i.Deferred,l=[],u=window.Data.docInfo,p=s-1+a;o=u.previewPageNum?~~u.previewPageNum:~~u.totalPageNum,a=p<=o?Math.min(o,a):Math.min(o%a,a);for(var f=0;f<a;f++)t(s,n({index:f,deferred:c,list:l,length:a,pn:s}),r),s++;return c.promise()}}};t.exports=r},{"./setting.js":53,zepto:"zepto"}],lang:[function(require,module,exports){var _guid="$BAIDU$";window[_guid]={},module.exports._guid=_guid;var $$=window[_guid]=window[_guid]||{global:{}};$$._counter=$$._counter||1;var guid=function(){return"TANGRAM$"+$$._counter++};module.exports.guid=guid;var _instances=$$._instances=$$._instances={},Class=function(){this.guid=guid(),!this.__decontrolled&&(_instances[this.guid]=this)};module.exports.Class=Class,Class.prototype.dispose=function(){delete $$._instances[this.guid];for(var e in this)"function"!=typeof this[e]&&delete this[e];this.disposed=!0},Class.prototype.toString=function(){return"[object "+(this.__type||this._className||"Object")+"]"},window.baiduInstance=function(e){return $$._instances[e]};var isString=function(e){return"[object String]"==Object.prototype.toString.call(e)};module.exports.isString=isString;var Event=function(e,t){this.type=e,this.returnValue=!0,this.target=t||null,this.currentTarget=null};module.exports.Event=Event,Class.prototype.fire=Class.prototype.dispatchEvent=function(e,t){isString(e)&&(e=new Event(e)),!this.__listeners&&(this.__listeners={}),t=t||{};for(var n in t)e[n]=t[n];var n,i,o=this,r=o.__listeners,s=e.type;if(e.target=e.target||(e.currentTarget=o),s.indexOf("on")&&(s="on"+s),"function"==typeof o[s]&&o[s].apply(o,arguments),"object"==typeof r[s])for(n=0,i=r[s].length;n<i;n++)r[s][n]&&r[s][n].apply(o,arguments);return e.returnValue},Class.prototype.on=Class.prototype.addEventListener=function(e,t,n){if("function"==typeof t){!this.__listeners&&(this.__listeners={});var i,o=this.__listeners;for(e.indexOf("on")&&(e="on"+e),"object"!=typeof o[e]&&(o[e]=[]),i=o[e].length-1;i>=0;i--)if(o[e][i]===t)return t;return o[e].push(t),n&&"string"==typeof n&&(o[e][n]=t),t}};var trimer=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g"),trim=function(e){return String(e).replace(trimer,"")};Class.prototype.addEventListeners=function(e,t){if("undefined"==typeof t)for(var n in e)this.addEventListener(n,e[n]);else{e=e.split(",");for(var n=0,i=e.length;n<i;n++)this.addEventListener(trim(e[n]),t)}},Class.prototype.un=Class.prototype.removeEventListener=function(e,t){var n,i=this.__listeners;if(i)if("undefined"!=typeof e){if(e.indexOf("on")&&(e="on"+e),"undefined"==typeof t)delete i[e];else if(i[e])for("string"==typeof t&&(t=i[e][t])&&delete i[e][t],n=i[e].length-1;n>=0;n--)i[e][n]===t&&i[e].splice(n,1)}else for(n in i)delete i[n]};var createClass=function(e,t){t=t||{};var n=t.superClass||Class,i=function(){var o=this;t.decontrolled&&(o.__decontrolled=!0),n.apply(o,arguments);for(r in i.options)o[r]=i.options[r];e.apply(o,arguments);for(var r=0,s=i["r"];s&&r<s.length;r++)s[r].apply(o,arguments)};i.options=t.options||{};var o=function(){},r=e.prototype;o.prototype=n.prototype;var s=i.prototype=new o;for(var a in r)s[a]=r[a];var c=t.className||t.type;return"string"==typeof c&&(s.__type=c),s.constructor=r.constructor,i.extend=function(e){for(var t in e)i.prototype[t]=e[t];return i},i};module.exports.createClass=createClass;var createSingle=function(e){var t=new Class;for(var n in e)t[n]=e[n];return t};module.exports.createSingle=createSingle,window[_guid]._instances=window[_guid]._instances||{};var decontrol=function(e){var t=window[_guid];t._instances&&delete t._instances[e]};module.exports.decontrol=decontrol;var eventCenter=window.$$_eventCenter=window.$$_eventCenter||createSingle();module.exports.eventCenter=eventCenter;var getModule=function(e,t){for(var n,i=e.split("."),o=t||window;n=i.shift();){if(null==o[n])return null;o=o[n]}return o};module.exports.getModule=getModule;var inherits=function(e,t,n){var i,o,r=e.prototype,s=new Function;s.prototype=t.prototype,o=e.prototype=new s;for(i in r)o[i]=r[i];return e.prototype.constructor=e,e.superClass=t.prototype,"string"==typeof n&&(o.__type=n),e.extend=function(t){for(var n in t)o[n]=t[n];return e},e};module.exports.inherits=inherits;var instance=function(e){return window[_guid]._instances[e]||null};module.exports.instance=instance;var isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)};module.exports.isArray=isArray;var isBoolean=function(e){return"boolean"==typeof e};module.exports.isBoolean=isBoolean;var isDate=function(e){return"[object Date]"==={}.toString.call(e)&&"Invalid Date"!==e.toString()&&!isNaN(e)};module.exports.isDate=isDate;var isElement=function(e){return!(!e||!e.nodeName||1!=e.nodeType)};module.exports.isElement=isElement;var isFunction=function(e){return"[object Function]"==Object.prototype.toString.call(e)};module.exports.isFunction=isFunction;var isNumber=function(e){return"[object Number]"==Object.prototype.toString.call(e)&&isFinite(e)};module.exports.isNumber=isNumber;var isObject=function(e){return"function"==typeof e||!(!e||"object"!=typeof e)};module.exports.isObject=isObject;var _module=function(name,module,owner){var packages=name.split("."),len=packages.length-1,packageName,i=0;if(!owner)try{if(!new RegExp("^[a-zA-Z_$][a-zA-Z0-9_$]*$").test(packages[0]))throw"";owner=eval(packages[0]),i=1}catch(e){owner=window}for(;i<len;i++)packageName=packages[i],owner[packageName]||(owner[packageName]={}),owner=owner[packageName];owner[packages[len]]||(owner[packages[len]]=module)};module.exports.module=_module;var register=function(e,t,n){var i=e["r"]||(e["r"]=[]);i[i.length]=t;for(var o in n)e.prototype[o]=n[o]};module.exports.register=register;var toArray=function(e){if(null===e||void 0===e)return[];if(isArray(e))return e;if("number"!=typeof e.length||"string"==typeof e||isFunction(e))return[e];if(e.item){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}return[].slice.call(e)};module.exports.toArray=toArray},{}],messengerExt:[function(e,t,n){var i=e("./messenger.js");i.prototype._init=function(){var e=this;e._extInit||(e._extInit=!0,e.listen(function(t){t=t||{},"string"==typeof t&&(t=JSON.parse(t)),t.eventName&&e._trigger(t.eventName,t)}))},i.prototype.on=function(e,t,n){this._init(),this.listObj=this.listObj||{},this.listObj[e]=this.listObj[e]||[];var i=n?{id:n,handler:t}:t;this.listObj[e].push(i)},i.prototype._trigger=function(e,t){if(t=t||{},this.listObj){var n=this.listObj[e];if(n&&n.length){var i=0,o=n.length;for(i;i<o;i++){var r=n[i];r.call(this,t)}}}},i.prototype.trigger=function(e,t){t=t||{},"string"==typeof t&&(t=JSON.parse(t)),t.eventName=e,this.send(JSON.stringify(t))},i.prototype.un=function(e,t){if(this.listObj){if(0===arguments.length)return void(this.listObj=null);if(1===arguments.length&&e)return void(this.listObj[e]=null);if(this.listObj&&this.listObj[e]&&this.listObj[e].length)for(var n=this.listObj[e],i=0;n[i];){var o=n[i];if("string"==typeof t){if("object"==typeof o&&o.id===t){this.listObj[e].splice(i,1);continue}}else if(o===t){this.listObj[e].splice(i,1);continue}i++}}},i.prototype.one=function(e,t){var n=this,i=function(i){n.un(e,t),t.call(n,i)};n.on(e,i)},i.prototype.response=function(e,t){var n=this,i="__REQUEST__"+e,o=function(e){var i=e.callBackName,o=function(e){"object"==typeof e&&(e=JSON.stringify(e)),n.trigger(i,e)};t.call(n,e,o)};n.on(i,o)},i.prototype.request=function(e,t){t=t||{};var n=t.callBack,i=t.data||{},o="__REQUEST__"+e,r="__RESPONSE__"+(new Date).getTime();i.callBackName=r,n&&this.one(r,n),this.trigger(o,i)},t.exports=i},{"./messenger.js":37}],ppt:[function(e,t,n){var i=e("zepto"),o=e("./ppt"),r=null;if(parent!==self){var s=e("messengerExt");r=new s("WENKU_WAP_READER"),r.addTarget(parent.window,"WENKU_WAP_API")}window.Data.messager=r,t.exports=function(e){i("body").addClass("ppt-reader");var t=window.Data.docInfo.pn?window.Data.docInfo.pn:1;window.location.href.indexOf("#/?page")==-1&&(window.location.href=window.location.href+(t?"#/?page="+t:"")),o({el:i(".reader"),docId:e.docInfo.doc_id,token:e.token,host:e.host,fileDir:window.Data.docInfo.fileDir,infoData:window.Data.docInfo.infoData}),r&&(r.request("readerReady"),r.request("setHeight",{data:{height:"500"}})),i(window).on("noticeUser",function(){setTimeout(function(){var e=window.Data.docInfo;e&&e.reGetToken&&"function"==typeof e.reGetToken&&e.reGetToken("page load success")},200)})}},{"./ppt":44,messengerExt:"messengerExt",zepto:"zepto"}],string:[function(e,t,n){var i=function(e,t,n){return e&&"string"==typeof e?t?(n=n||"...",e.length>t?e.slice(0,t)+n:e):e:""};t.exports.cut=i;var o=function(e){var t=String(e).replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");return t.replace(/&#([\d]+);/g,function(e,t){
return String.fromCharCode(parseInt(t,10))})};t.exports.decodeHTML=o;var r=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};t.exports.encodeHTML=r;var s=function(e){return String(e).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1")};t.exports.escapeReg=s;var a=function(e,t){var n=Array.prototype.slice.call(arguments,1),i=Object.prototype.toString;return n.length?(n=1==n.length&&null!==t&&/\[object Array\]|\[object Object\]/.test(i.call(t))?t:n,e.replace(/#\{(.+?)\}/g,function(e,t){var o,r,s,a,c;if(!n)return"";for(o=t.split("|"),r=n[o[0]],"[object Function]"==i.call(r)&&(r=r(o[0])),s=1,a=o.length;s<a;++s)c=baidu.string.filterFormat[o[s]],"[object Function]"==i.call(c)&&(r=c(r));return"undefined"==typeof r||null===r?"":r})):e};t.exports.filterFormat=a,a.escapeJs=function(e){if(!e||"string"!=typeof e)return e;var t,n,i,o=[];for(t=0,n=e.length;t<n;++t)i=e.charCodeAt(t),i>255?o.push(e.charAt(t)):o.push("\\x"+i.toString(16));return o.join("")},a.js=a.escapeJs,a.escapeString=function(e){return e&&"string"==typeof e?e.replace(/["'<>\\\/`]/g,function(e){return"&#"+e.charCodeAt(0)+";"}):e},a.e=a.escapeString,a.toInt=function(e){return parseInt(e,10)||0},a.i=a.toInt;var c=function(e,t){e=String(e);var n=Array.prototype.slice.call(arguments,1),i=Object.prototype.toString;return n.length?(n=1==n.length&&null!==t&&/\[object Array\]|\[object Object\]/.test(i.call(t))?t:n,e.replace(/#\{(.+?)\}/g,function(e,t){var o=n[t];return"[object Function]"==i.call(o)&&(o=o(t)),"undefined"==typeof o?"":o})):e};t.exports.format=c,function(){var e=/^\#[\da-f]{6}$/i,n=/^rgb\((\d+), (\d+), (\d+)\)$/,i={black:"#000000",silver:"#c0c0c0",gray:"#808080",white:"#ffffff",maroon:"#800000",red:"#ff0000",purple:"#800080",fuchsia:"#ff00ff",green:"#008000",lime:"#00ff00",olive:"#808000",yellow:"#ffff0",navy:"#000080",blue:"#0000ff",teal:"#008080",aqua:"#00ffff"},o=function(t){if(e.test(t))return t;if(n.test(t)){for(var o,r=1,t="#";r<4;r++)o=parseInt(RegExp["$"+r]).toString(16),t+=("00"+o).substr(o.length);return t}if(/^\#[\da-f]{3}$/.test(t)){var s=t.charAt(1),a=t.charAt(2),c=t.charAt(3);return"#"+s+s+a+a+c+c}return i[t]?i[t]:""};t.exports.formatColor=o}();var l=function(e){return String(e).replace(/[^\x00-\xff]/g,"ci").length};t.exports.getByteLength=l;var u=function(e){return String(e||"").replace(/<[^>]+>/g,"")};t.exports.stripTags=u;var p=function(e,t,n){return e=String(e),n=n||"",t<0||l(e)<=t?e+n:(e=e.substr(0,t).replace(/([^\x00-\xff])/g,"$1 ").substr(0,t).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"$1"),e+n)};t.exports.subByte=p;var f=function(e){return e.indexOf("-")<0&&e.indexOf("_")<0?e:e.replace(/[-_][^-_]/g,function(e){return e.charAt(1).toUpperCase()})};t.exports.toCamelCase=f;var d=function(e){return String(e).replace(/[\uFF01-\uFF5E]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}).replace(/\u3000/g," ")};t.exports.toHalfWidth=d;var h=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g"),g=function(e){return String(e).replace(h,"")};t.exports.trim=g;var m=function(e){return String(e).replace(/(?:<[^>]+>)|(?:&#?[0-9a-z]{2,6};)|(.{1})/gi,"$&<wbr>").replace(/><wbr>/g,">")};t.exports.wbr=m},{}],taskrunner:[function(e,t,n){var i=e("lang"),o=e("zepto"),r=i.createClass(function(){this.list=[]});r.extend({context:i.createSingle(),add:function(e){this.list.push(e)},next:function(){var e=this.list.shift();if(e)if(i.isArray(e)){var t=[],n=0;for(n;n<e.length;n++)e[n].call(this,this.context,function(){var e=new o.Deferred;return t.push(e.promise()),function(){e.resolve()}}());o.when.apply(o,t).then(o.proxy(this.next,this))}else e.call(this,this.context,o.proxy(this.next,this));else this.done&&this.done(this.context)},run:function(e,t){t&&t(this.context),e&&(this.done=e),this.next()}}),t.exports=r},{lang:"lang",zepto:"zepto"}],tasks:[function(e,t,n){t.exports={getConfig:e("./getconfig.js"),getToken:e("./gettoken.js"),getPower:e("./getpower.js"),getBcsUrl:e("./getBcsUrl.js"),createreader:e("./createreader.js"),getHybrid:e("./gethybrid.js"),getDocInfo:e("./getdocinfo.js")}},{"./createreader.js":57,"./getBcsUrl.js":58,"./getconfig.js":59,"./getdocinfo.js":60,"./gethybrid.js":61,"./getpower.js":62,"./gettoken.js":63}],token:[function(e,t,n){var i=e("lang"),o=e("zepto"),r=i.createClass(function(e){this.host=e.host,this.secretKey=e.secretKey,this.docId=e.docId,this.https=e.https}).extend({host:this.host,secretKey:this.secretKey,get:function(e){return o.ajax({url:e,data:{host:this.host,secretKey:this.secretKey,https:this.https},dataType:"jsonp"})}});t.exports=r},{lang:"lang",zepto:"zepto"}],util:[function(e,t,n){var i=e("../dep/zepto.js"),o=function(e,t){for(var n=e.length;n--;)n in e&&e[n]===t&&e.splice(n,1);return e},r=function(){var e=1;return function(t){var n=e++;return t?t+n:n}}();n.uniqueId=r;var s=function(){var e=9e3,t="ZIndexDefaultValue",n=[];return{bringToFront:function(s){var a,c=i(s);null===c.data(t)&&(a=c.css("z-index"),c.data(t,a)),c.css("z-index",e++),s.id||(s.id=r("Zuniqueid__")),o(n,s.id),n.push(s.id)},sendToBack:function(e){var t=i(e),s=t.data(s)||0;e.id||(e.id=r("Zuniqueid__")),t.css("z-index",s),o(n,e.id)},getActive:function(){return n.length>0?n[n.length-1]:null}}}();n.zIndexManager=s;var a=function(e){var t=e.fn,n=[].slice,i=e();return i.length=1,function(e,o){return i[0]=e,t[o].apply(i,n.call(arguments,2))}}(i);n.staticCall=a;var c=function(e,t,n){t=t||13,n=n||null,setTimeout(function(){e.call(n)},t)};n.deferFn=c;var l={0:"none",1:"doc",2:"xls",3:"ppt",4:"docx",5:"xlsx",6:"pptx",7:"pdf",8:"txt",9:"wps",10:"et",11:"dps",12:"vsd",13:"rtf",14:"pot",15:"pps",16:"epub"};n.docType2Str=function(e){return l[e]},n.query2JSON=function(e){for(var t,n,o,r,s=e.substr(e.lastIndexOf("?")+1),a=s.split("&"),c=a.length,l={},u=0;u<c;u++)a[u]&&(r=a[u].split("="),t=r[0],n=r[1],o=l[t],"undefined"==typeof o?l[t]=n:i.isArray(o)?o.push(n):l[t]=[o,n]);return l};var u=Object.keys,p=function(e){if(!i.isPlainObject(e))return[];if(u)return u(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},f=function(e){for(var t={},n=p(e),i=0,o=n.length;i<o;i++)t[e[n[i]]]=n[i];return t},d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},h=f(d),g=function(e){var t=function(t){return e[t]},n="(?:"+p(e).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(o,t):e}};n.escape=g(d),n.unescape=g(h);var m=function(){this.q=[],this.paused=!1,this._inProgress=!1};i.extend(m.prototype,{add:function(){var e=this;return i.each(arguments,function(t){i.isFunction(t)&&e.q.push(t)}),this},dequeue:function(){return this.empty()||this.q.pop(),this},next:function(){if(!this.empty()&&!this.paused)return this._inProgress=!0,this.q.shift().apply(this),this},flush:function(){for(;!this.empty()&&!this.paused;)this.next();return this},clear:function(){return this.q.length=0,this},empty:function(){return 0===this.q.length&&(this._inProgress=!1,!0)},remove:function(e){return o(this.q,e),this},promote:function(e){return this.remove(e),this.q.unshfit(e),this},pause:function(){return this.paused=!0,this},run:function(){return this.paused=!1,this.next(),this}}),n.queue=m;var v=function(){var e=location.search,t={};if(e.indexOf("?")!=-1){var n=e.substr(1);strs=n.split("&");for(var i=0;i<strs.length;i++)t[strs[i].split("=")[0]]=unescape(strs[i].split("=")[1])}return t};n.getUrlParams=v},{"../dep/zepto.js":"zepto"}],zepto:[function(e,t,n){var i=function(){function e(e){return null==e?String(e):Y[Z.call(e)]||"object"}function t(t){return"function"==e(t)}function n(e){return null!=e&&e==e.window}function i(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function o(t){return"object"==e(t)}function r(e){return o(e)&&!n(e)&&Object.getPrototypeOf(e)==Object.prototype}function s(e){return"number"==typeof e.length}function a(e){return C.call(e,function(e){return null!=e})}function c(e){return e.length>0?E.fn.concat.apply([],e):e}function l(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(e){return e in N?N[e]:N[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function p(e,t){return"number"!=typeof t||I[l(e)]?t:t+"px"}function f(e){var t,n;return O[e]||(t=D.createElement(e),D.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),O[e]=n),O[e]}function d(e){return"children"in e?z.call(e.children):E.map(e.childNodes,function(e){if(1==e.nodeType)return e})}function h(e,t){var n,i=e?e.length:0;for(n=0;n<i;n++)this[n]=e[n];this.length=i,this.selector=t||""}function g(e,t,n){for(j in t)n&&(r(t[j])||Q(t[j]))?(r(t[j])&&!r(e[j])&&(e[j]={}),Q(t[j])&&!Q(e[j])&&(e[j]=[]),g(e[j],t[j],n)):t[j]!==_&&(e[j]=t[j])}function m(e,t){return null==t?E(e):E(e).filter(t)}function v(e,n,i,o){return t(n)?n.call(e,i,o):n}function w(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function y(e,t){var n=e.className||"",i=n&&n.baseVal!==_;return t===_?i?n.baseVal:n:void(i?n.baseVal=t:e.className=t)}function x(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?E.parseJSON(e):e):e}catch(t){return e}}function b(e,t){t(e);for(var n=0,i=e.childNodes.length;n<i;n++)b(e.childNodes[n],t)}var _,j,E,T,P,S,$=[],k=$.concat,C=$.filter,z=$.slice,D=window.document,O={},N={},I={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},A=/^\s*<(\w+|!)[^>]*>/,M=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,L=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,H=/^(?:body|html)$/i,V=/([A-Z])/g,W=["val","css","html","text","data","width","height","offset"],R=["after","prepend","before","append"],q=D.createElement("table"),F=D.createElement("tr"),U={tr:D.createElement("tbody"),tbody:q,thead:q,tfoot:q,td:F,th:F,"*":D.createElement("div")},X=/complete|loaded|interactive/,B=/^[\w-]*$/,Y={},Z=Y.toString,G={},J=D.createElement("div"),K={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Q=Array.isArray||function(e){return e instanceof Array};return G.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,o=e.parentNode,r=!o;return r&&(o=J).appendChild(e),i=~G.qsa(o,t).indexOf(e),r&&J.removeChild(e),i},P=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},S=function(e){return C.call(e,function(t,n){return e.indexOf(t)==n})},G.fragment=function(e,t,n){var i,o,s;return M.test(e)&&(i=E(D.createElement(RegExp.$1))),i||(e.replace&&(e=e.replace(L,"<$1></$2>")),t===_&&(t=A.test(e)&&RegExp.$1),t in U||(t="*"),s=U[t],s.innerHTML=""+e,i=E.each(z.call(s.childNodes),function(){s.removeChild(this)})),r(n)&&(o=E(i),E.each(n,function(e,t){W.indexOf(e)>-1?o[e](t):o.attr(e,t)})),i},G.Z=function(e,t){return new h(e,t)},G.isZ=function(e){return e instanceof G.Z},G.init=function(e,n){var i;if(!e)return G.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&A.test(e))i=G.fragment(e,RegExp.$1,n),e=null;else{if(n!==_)return E(n).find(e);i=G.qsa(D,e)}else{if(t(e))return E(D).ready(e);if(G.isZ(e))return e;if(Q(e))i=a(e);else if(o(e))i=[e],e=null;else if(A.test(e))i=G.fragment(e.trim(),RegExp.$1,n),e=null;else{if(n!==_)return E(n).find(e);i=G.qsa(D,e)}}return G.Z(i,e)},E=function(e,t){return G.init(e,t)},E.extend=function(e){var t,n=z.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){g(e,n,t)}),e},G.qsa=function(e,t){var n,i="#"==t[0],o=!i&&"."==t[0],r=i||o?t.slice(1):t,s=B.test(r);return e.getElementById&&s&&i?(n=e.getElementById(r))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:z.call(s&&!i&&e.getElementsByClassName?o?e.getElementsByClassName(r):e.getElementsByTagName(t):e.querySelectorAll(t))},E.contains=D.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},E.type=e,E.isFunction=t,E.isWindow=n,E.isArray=Q,E.isPlainObject=r,E.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},E.inArray=function(e,t,n){return $.indexOf.call(t,e,n)},E.camelCase=P,E.trim=function(e){return null==e?"":String.prototype.trim.call(e)},E.uuid=0,E.support={},E.expr={},E.noop=function(){},E.map=function(e,t){var n,i,o,r=[];if(s(e))for(i=0;i<e.length;i++)n=t(e[i],i),null!=n&&r.push(n);else for(o in e)n=t(e[o],o),null!=n&&r.push(n);return c(r)},E.each=function(e,t){var n,i;if(s(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(i in e)if(t.call(e[i],i,e[i])===!1)return e;return e},E.grep=function(e,t){return C.call(e,t)},window.JSON&&(E.parseJSON=JSON.parse),E.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Y["[object "+t+"]"]=t.toLowerCase()}),E.fn={constructor:G.Z,length:0,forEach:$.forEach,reduce:$.reduce,push:$.push,sort:$.sort,splice:$.splice,indexOf:$.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=G.isZ(t)?t.toArray():t;return k.apply(G.isZ(this)?this.toArray():this,n)},map:function(e){return E(E.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return E(z.apply(this,arguments))},ready:function(e){return X.test(D.readyState)&&D.body?e(E):D.addEventListener("DOMContentLoaded",function(){e(E)},!1),this},get:function(e){return e===_?z.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return $.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return t(e)?this.not(this.not(e)):E(C.call(this,function(t){return G.matches(t,e)}))},add:function(e,t){return E(S(this.concat(E(e,t))))},is:function(e){return this.length>0&&G.matches(this[0],e)},not:function(e){var n=[];if(t(e)&&e.call!==_)this.each(function(t){e.call(this,t)||n.push(this)});else{var i="string"==typeof e?this.filter(e):s(e)&&t(e.item)?z.call(e):E(e);this.forEach(function(e){i.indexOf(e)<0&&n.push(e)})}return E(n)},has:function(e){return this.filter(function(){return o(e)?E.contains(this,e):E(this).find(e).size()})},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!o(e)?e:E(e)},last:function(){var e=this[this.length-1];return e&&!o(e)?e:E(e)},find:function(e){var t,n=this;return t=e?"object"==typeof e?E(e).filter(function(){var e=this;return $.some.call(n,function(t){return E.contains(t,e)})}):1==this.length?E(G.qsa(this[0],e)):this.map(function(){return G.qsa(this,e)}):E()},closest:function(e,t){var n=this[0],o=!1;for("object"==typeof e&&(o=E(e));n&&!(o?o.indexOf(n)>=0:G.matches(n,e));)n=n!==t&&!i(n)&&n.parentNode;return E(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=E.map(n,function(e){if((e=e.parentNode)&&!i(e)&&t.indexOf(e)<0)return t.push(e),e});return m(t,e)},parent:function(e){return m(S(this.pluck("parentNode")),e)},children:function(e){return m(this.map(function(){return d(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||z.call(this.childNodes)})},siblings:function(e){return m(this.map(function(e,t){return C.call(d(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return E.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=f(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=t(e);if(this[0]&&!n)var i=E(e).get(0),o=i.parentNode||this.length>1;return this.each(function(t){E(this).wrapAll(n?e.call(this,t):o?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){E(this[0]).before(e=E(e));for(var t;(t=e.children()).length;)e=t.first();E(e).append(this)}return this},wrapInner:function(e){var n=t(e);return this.each(function(t){var i=E(this),o=i.contents(),r=n?e.call(this,t):e;o.length?o.wrapAll(r):i.append(r)})},unwrap:function(){return this.parent().each(function(){E(this).replaceWith(E(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=E(this);(e===_?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return E(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return E(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var n=this.innerHTML;E(this).empty().append(v(this,e,t,n))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=v(this,e,t,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(e,t){var n;return"string"!=typeof e||1 in arguments?this.each(function(n){if(1===this.nodeType)if(o(e))for(j in e)w(this,j,e[j]);else w(this,e,v(this,t,n,this.getAttribute(e)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(e))&&e in this[0]?this[0][e]:n:_},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){w(this,e)},this)})},prop:function(e,t){return e=K[e]||e,1 in arguments?this.each(function(n){this[e]=v(this,t,n,this[e])}):this[0]&&this[0][e]},data:function(e,t){var n="data-"+e.replace(V,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,t):this.attr(n);return null!==i?x(i):_},val:function(e){return 0 in arguments?this.each(function(t){this.value=v(this,e,t,this.value)}):this[0]&&(this[0].multiple?E(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var n=E(this),i=v(this,e,t,n.offset()),o=n.offsetParent().offset(),r={top:i.top-o.top,left:i.left-o.left};"static"==n.css("position")&&(r.position="relative"),n.css(r)});if(!this.length)return null;if(!E.contains(D.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,n){if(arguments.length<2){var i,o=this[0];if(!o)return;if(i=getComputedStyle(o,""),"string"==typeof t)return o.style[P(t)]||i.getPropertyValue(t);if(Q(t)){var r={};return E.each(t,function(e,t){r[t]=o.style[P(t)]||i.getPropertyValue(t)}),r}}var s="";if("string"==e(t))n||0===n?s=l(t)+":"+p(t,n):this.each(function(){this.style.removeProperty(l(t))});else for(j in t)t[j]||0===t[j]?s+=l(j)+":"+p(j,t[j])+";":this.each(function(){this.style.removeProperty(l(j))});return this.each(function(){this.style.cssText+=";"+s})},index:function(e){return e?this.indexOf(E(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&$.some.call(this,function(e){return this.test(y(e))},u(e))},addClass:function(e){return e?this.each(function(t){if("className"in this){T=[];var n=y(this),i=v(this,e,t,n);i.split(/\s+/g).forEach(function(e){E(this).hasClass(e)||T.push(e)},this),T.length&&y(this,n+(n?" ":"")+T.join(" "))}}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===_)return y(this,"");T=y(this),v(this,e,t,T).split(/\s+/g).forEach(function(e){T=T.replace(u(e)," ")}),y(this,T.trim())}})},toggleClass:function(e,t){return e?this.each(function(n){var i=E(this),o=v(this,e,n,y(this));o.split(/\s+/g).forEach(function(e){(t===_?!i.hasClass(e):t)?i.addClass(e):i.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===_?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===_?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=H.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(E(e).css("margin-top"))||0,n.left-=parseFloat(E(e).css("margin-left"))||0,i.top+=parseFloat(E(t[0]).css("border-top-width"))||0,i.left+=parseFloat(E(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||D.body;e&&!H.test(e.nodeName)&&"static"==E(e).css("position");)e=e.offsetParent;return e})}},E.fn.detach=E.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});E.fn[e]=function(o){var r,s=this[0];return o===_?n(s)?s["inner"+t]:i(s)?s.documentElement["scroll"+t]:(r=this.offset())&&r[e]:this.each(function(t){s=E(this),s.css(e,v(this,o,t,s[e]()))})}}),R.forEach(function(t,n){var i=n%2;E.fn[t]=function(){var t,o,r=E.map(arguments,function(n){return t=e(n),"object"==t||"array"==t||null==n?n:G.fragment(n)}),s=this.length>1;return r.length<1?this:this.each(function(e,t){o=i?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null;var a=E.contains(D.documentElement,o);r.forEach(function(e){if(s)e=e.cloneNode(!0);else if(!o)return E(e).remove();o.insertBefore(e,t),a&&b(e,function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},E.fn[i?t+"To":"insert"+(n?"Before":"After")]=function(e){return E(e)[t](this),this}}),G.Z.prototype=h.prototype=E.fn,G.uniq=S,G.deserializeValue=x,E.zepto=G,E}();!function(e){function t(e){return e._zid||(e._zid=f++)}function n(e,n,r,s){if(n=i(n),n.ns)var a=o(n.ns);return(m[t(e)]||[]).filter(function(e){return e&&(!n.e||e.e==n.e)&&(!n.ns||a.test(e.ns))&&(!r||t(e.fn)===t(r))&&(!s||e.sel==s)})}function i(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function o(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function r(e,t){return e.del&&!w&&e.e in y||!!t}function s(e){return x[e]||w&&y[e]||e}function a(n,o,a,c,u,f,d){var h=t(n),g=m[h]||(m[h]=[]);o.split(/\s/).forEach(function(t){if("ready"==t)return e(document).ready(a);var o=i(t);o.fn=a,o.sel=u,o.e in x&&(a=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return o.fn.apply(this,arguments)}),o.del=f;var h=f||a;o.proxy=function(e){if(e=l(e),!e.isImmediatePropagationStopped()){e.data=c;var t=h.apply(n,e._args==p?[e]:[e].concat(e._args));return t===!1&&(e.preventDefault(),e.stopPropagation()),t}},o.i=g.length,g.push(o),"addEventListener"in n&&n.addEventListener(s(o.e),o.proxy,r(o,d))})}function c(e,i,o,a,c){var l=t(e);(i||"").split(/\s/).forEach(function(t){n(e,t,o,a).forEach(function(t){delete m[l][t.i],"removeEventListener"in e&&e.removeEventListener(s(t.e),t.proxy,r(t,c))})})}function l(t,n){return!n&&t.isDefaultPrevented||(n||(n=t),e.each(E,function(e,i){var o=n[e];t[e]=function(){return this[i]=b,o&&o.apply(n,arguments)},t[i]=_}),(n.defaultPrevented!==p?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=b)),t}function u(e){var t,n={originalEvent:e};for(t in e)j.test(t)||e[t]===p||(n[t]=e[t]);return l(n,e)}var p,f=1,d=Array.prototype.slice,h=e.isFunction,g=function(e){return"string"==typeof e},m={},v={},w="onfocusin"in window,y={focus:"focusin",blur:"focusout"},x={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",e.event={add:a,remove:c},e.proxy=function(n,i){var o=2 in arguments&&d.call(arguments,2);if(h(n)){var r=function(){return n.apply(i,o?o.concat(d.call(arguments)):arguments)};return r._zid=t(n),r}if(g(i))return o?(o.unshift(n[i],n),e.proxy.apply(null,o)):e.proxy(n[i],n);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var b=function(){return!0},_=function(){return!1},j=/^([A-Z]|returnValue$|layer[XY]$)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,i,o,r){var s,l,f=this;return t&&!g(t)?(e.each(t,function(e,t){f.on(e,n,i,t,r)}),f):(g(n)||h(o)||o===!1||(o=i,i=n,n=p),o!==p&&i!==!1||(o=i,i=p),o===!1&&(o=_),f.each(function(p,f){r&&(s=function(e){return c(f,e.type,o),o.apply(this,arguments)}),n&&(l=function(t){var i,r=e(t.target).closest(n,f).get(0);if(r&&r!==f)return i=e.extend(u(t),{currentTarget:r,liveFired:f}),(s||o).apply(r,[i].concat(d.call(arguments,1)))}),a(f,t,o,i,n,l||s)}))},e.fn.off=function(t,n,i){var o=this;return t&&!g(t)?(e.each(t,function(e,t){o.off(e,n,t)}),o):(g(n)||h(i)||i===!1||(i=n,n=p),i===!1&&(i=_),o.each(function(){c(this,t,i,n)}))},e.fn.trigger=function(t,n){return t=g(t)||e.isPlainObject(t)?e.Event(t):l(t),t._args=n,this.each(function(){t.type in y&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,i){var o,r;return this.each(function(s,a){o=u(g(t)?e.Event(t):t),o._args=i,o.target=a,e.each(n(a,t.type||t),function(e,t){if(r=t.proxy(o),o.isImmediatePropagationStopped())return!1})}),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),e.Event=function(e,t){g(e)||(t=e,e=t.type);var n=document.createEvent(v[e]||"Events"),i=!0;if(t)for(var o in t)"bubbles"==o?i=!!t[o]:n[o]=t[o];return n.initEvent(e,i,!0),l(n)}}(i),function(e){function t(t,n,i){var o=e.Event(n);return e(t).trigger(o,i),!o.isDefaultPrevented()}function n(e,n,i,o){if(e.global)return t(n||w,i,o)}function i(t){t.global&&0===e.active++&&n(t,null,"ajaxStart")}function o(t){t.global&&!--e.active&&n(t,null,"ajaxStop")}function r(e,t){var i=t.context;return t.beforeSend.call(i,e,t)!==!1&&n(t,i,"ajaxBeforeSend",[e,t])!==!1&&void n(t,i,"ajaxSend",[e,t])}function s(e,t,i,o){var r=i.context,s="success";i.success.call(r,e,s,t),o&&o.resolveWith(r,[e,s,t]),n(i,r,"ajaxSuccess",[t,i,e]),c(s,t,i)}function a(e,t,i,o,r){var s=o.context;o.error.call(s,i,t,e),r&&r.rejectWith(s,[i,t,e]),n(o,s,"ajaxError",[i,o,e||t]),c(t,i,o)}function c(e,t,i){var r=i.context;i.complete.call(r,t,e),n(i,r,"ajaxComplete",[t,i]),o(i)}function l(){}function u(e){return e&&(e=e.split(";",2)[0]),e&&(e==j?"html":e==_?"json":x.test(e)?"script":b.test(e)&&"xml")||"text"}function p(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function f(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=p(t.url,t.data),t.data=void 0)}function d(t,n,i,o){return e.isFunction(n)&&(o=i,i=n,n=void 0),e.isFunction(i)||(o=i,i=void 0),{url:t,data:n,success:i,dataType:o}}function h(t,n,i,o){var r,s=e.isArray(n),a=e.isPlainObject(n);e.each(n,function(n,c){r=e.type(c),o&&(n=i?o:o+"["+(a||"object"==r||"array"==r?n:"")+"]"),!o&&s?t.add(c.name,c.value):"array"==r||!i&&"object"==r?h(t,c,i,n):t.add(n,c)})}var g,m,v=0,w=window.document,y=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,x=/^(?:text|application)\/javascript/i,b=/^(?:text|application)\/xml/i,_="application/json",j="text/html",E=/^\s*$/,T=w.createElement("a");T.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var i,o,c=t.jsonpCallback,l=(e.isFunction(c)?c():c)||"jsonp"+ ++v,u=w.createElement("script"),p=window[l],f=function(t){e(u).triggerHandler("error",t||"abort")},d={abort:f};return n&&n.promise(d),e(u).on("load error",function(r,c){clearTimeout(o),e(u).off().remove(),"error"!=r.type&&i?s(i[0],d,t,n):a(null,c||"error",d,t,n),window[l]=p,i&&e.isFunction(p)&&p(i[0]),p=i=void 0}),r(d,t)===!1?(f("abort"),d):(window[l]=function(){i=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+l),w.head.appendChild(u),t.timeout>0&&(o=setTimeout(function(){f("timeout")},t.timeout)),d)},e.ajaxSettings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:_,xml:"application/xml, text/xml",html:j,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},e.ajax=function(t){var n,o,c=e.extend({},t||{}),d=e.Deferred&&e.Deferred();for(g in e.ajaxSettings)void 0===c[g]&&(c[g]=e.ajaxSettings[g]);i(c),c.crossDomain||(n=w.createElement("a"),n.href=c.url,n.href=n.href,c.crossDomain=T.protocol+"//"+T.host!=n.protocol+"//"+n.host),c.url||(c.url=window.location.toString()),(o=c.url.indexOf("#"))>-1&&(c.url=c.url.slice(0,o)),f(c);var h=c.dataType,v=/\?.+=\?/.test(c.url);if(v&&(h="jsonp"),c.cache!==!1&&(t&&t.cache===!0||"script"!=h&&"jsonp"!=h)||(c.url=p(c.url,"_="+Date.now())),"jsonp"==h)return v||(c.url=p(c.url,c.jsonp?c.jsonp+"=?":c.jsonp===!1?"":"callback=?")),e.ajaxJSONP(c,d);var y,x=c.accepts[h],b={},_=function(e,t){b[e.toLowerCase()]=[e,t]},j=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,P=c.xhr(),S=P.setRequestHeader;if(d&&d.promise(P),c.crossDomain||_("X-Requested-With","XMLHttpRequest"),_("Accept",x||"*/*"),(x=c.mimeType||x)&&(x.indexOf(",")>-1&&(x=x.split(",",2)[0]),P.overrideMimeType&&P.overrideMimeType(x)),(c.contentType||c.contentType!==!1&&c.data&&"GET"!=c.type.toUpperCase())&&_("Content-Type",c.contentType||"application/x-www-form-urlencoded"),c.headers)for(m in c.headers)_(m,c.headers[m]);if(P.setRequestHeader=_,P.onreadystatechange=function(){if(4==P.readyState){P.onreadystatechange=l,clearTimeout(y);var t,n=!1;if(P.status>=200&&P.status<300||304==P.status||0==P.status&&"file:"==j){h=h||u(c.mimeType||P.getResponseHeader("content-type")),t=P.responseText;try{"script"==h?(0,eval)(t):"xml"==h?t=P.responseXML:"json"==h&&(t=E.test(t)?null:e.parseJSON(t))}catch(i){n=i}n?a(n,"parsererror",P,c,d):s(t,P,c,d)}else a(P.statusText||null,P.status?"error":"abort",P,c,d)}},r(P,c)===!1)return P.abort(),a(null,"abort",P,c,d),P;if(c.xhrFields)for(m in c.xhrFields)P[m]=c.xhrFields[m];var $=!("async"in c)||c.async;P.open(c.type,c.url,$,c.username,c.password);for(m in b)S.apply(P,b[m]);return c.timeout>0&&(y=setTimeout(function(){P.onreadystatechange=l,P.abort(),a(null,"timeout",P,c,d)},c.timeout)),P.send(c.data?c.data:null),P},e.get=function(){return e.ajax(d.apply(null,arguments))},e.post=function(){var t=d.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=d.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,i){if(!this.length)return this;var o,r=this,s=t.split(/\s/),a=d(t,n,i),c=a.success;return s.length>1&&(a.url=s[0],o=s[1]),a.success=function(t){r.html(o?e("<div>").html(t.replace(y,"")).find(o):t),c&&c.apply(r,arguments)},e.ajax(a),this};var P=encodeURIComponent;e.param=function(t,n){var i=[];return i.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(P(t)+"="+P(n))},h(i,t,n),i.join("&").replace(/%20/g,"+")}}(i),function(e){e.fn.serializeArray=function(){var t,n,i=[],o=function(e){return e.forEach?e.forEach(o):void i.push({
name:t,value:e})};return this[0]&&e.each(this[0].elements,function(i,r){n=r.type,t=r.name,t&&"fieldset"!=r.nodeName.toLowerCase()&&!r.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||r.checked)&&o(e(r).val())}),i},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(i),function(){try{getComputedStyle(void 0)}catch(e){var t=getComputedStyle;window.getComputedStyle=function(e){try{return t(e)}catch(n){return null}}}}(),function(e){function t(e,t){var n=this.os={},i=this.browser={},o=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),r=e.match(/(Android);?[\s\/]+([\d.]+)?/),s=!!e.match(/\(Macintosh\; Intel /),a=e.match(/(iPad).*OS\s([\d_]+)/),c=e.match(/(iPod)(.*OS\s([\d_]+))?/),l=!a&&e.match(/(iPhone\sOS)\s([\d_]+)/),u=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),p=/Win\d{2}|Windows/.test(t),f=e.match(/Windows Phone ([\d.]+)/),d=u&&e.match(/TouchPad/),h=e.match(/Kindle\/([\d.]+)/),g=e.match(/Silk\/([\d._]+)/),m=e.match(/(BlackBerry).*Version\/([\d.]+)/),v=e.match(/(BB10).*Version\/([\d.]+)/),w=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),y=e.match(/PlayBook/),x=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),b=e.match(/Firefox\/([\d.]+)/),_=e.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),j=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),E=!x&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),T=E||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(i.webkit=!!o)&&(i.version=o[1]),r&&(n.android=!0,n.version=r[2]),l&&!c&&(n.ios=n.iphone=!0,n.version=l[2].replace(/_/g,".")),a&&(n.ios=n.ipad=!0,n.version=a[2].replace(/_/g,".")),c&&(n.ios=n.ipod=!0,n.version=c[3]?c[3].replace(/_/g,"."):null),f&&(n.wp=!0,n.version=f[1]),u&&(n.webos=!0,n.version=u[2]),d&&(n.touchpad=!0),m&&(n.blackberry=!0,n.version=m[2]),v&&(n.bb10=!0,n.version=v[2]),w&&(n.rimtabletos=!0,n.version=w[2]),y&&(i.playbook=!0),h&&(n.kindle=!0,n.version=h[1]),g&&(i.silk=!0,i.version=g[1]),!g&&n.android&&e.match(/Kindle Fire/)&&(i.silk=!0),x&&(i.chrome=!0,i.version=x[1]),b&&(i.firefox=!0,i.version=b[1]),_&&(n.firefoxos=!0,n.version=_[1]),j&&(i.ie=!0,i.version=j[1]),T&&(s||n.ios||p)&&(i.safari=!0,n.ios||(i.version=T[1])),E&&(i.webview=!0),n.tablet=!!(a||y||r&&!e.match(/Mobile/)||b&&e.match(/Tablet/)||j&&!e.match(/Phone/)&&e.match(/Touch/)),n.phone=!(n.tablet||n.ipod||!(r||l||u||m||v||x&&e.match(/Android/)||x&&e.match(/CriOS\/([\d.]+)/)||b&&e.match(/Mobile/)||j&&e.match(/Touch/)))}t.call(e,navigator.userAgent,navigator.platform),e.__detect=t}(i),function(e,t){function n(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function i(e){return o?o+e:e.toLowerCase()}var o,r,s,a,c,l,u,p,f,d,h="",g={Webkit:"webkit",Moz:"",O:"o"},m=document.createElement("div"),v=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,w={};e.each(g,function(e,n){if(m.style[e+"TransitionProperty"]!==t)return h="-"+e.toLowerCase()+"-",o=n,!1}),r=h+"transform",w[s=h+"transition-property"]=w[a=h+"transition-duration"]=w[l=h+"transition-delay"]=w[c=h+"transition-timing-function"]=w[u=h+"animation-name"]=w[p=h+"animation-duration"]=w[d=h+"animation-delay"]=w[f=h+"animation-timing-function"]="",e.fx={off:o===t&&m.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:h,transitionEnd:i("TransitionEnd"),animationEnd:i("AnimationEnd")},e.fn.animate=function(n,i,o,r,s){return e.isFunction(i)&&(r=i,o=t,i=t),e.isFunction(o)&&(r=o,o=t),e.isPlainObject(i)&&(o=i.easing,r=i.complete,s=i.delay,i=i.duration),i&&(i=("number"==typeof i?i:e.fx.speeds[i]||e.fx.speeds._default)/1e3),s&&(s=parseFloat(s)/1e3),this.anim(n,i,o,r,s)},e.fn.anim=function(i,o,h,g,m){var y,x,b,_={},j="",E=this,T=e.fx.transitionEnd,P=!1;if(o===t&&(o=e.fx.speeds._default/1e3),m===t&&(m=0),e.fx.off&&(o=0),"string"==typeof i)_[u]=i,_[p]=o+"s",_[d]=m+"s",_[f]=h||"linear",T=e.fx.animationEnd;else{x=[];for(y in i)v.test(y)?j+=y+"("+i[y]+") ":(_[y]=i[y],x.push(n(y)));j&&(_[r]=j,x.push(r)),o>0&&"object"==typeof i&&(_[s]=x.join(", "),_[a]=o+"s",_[l]=m+"s",_[c]=h||"linear")}return b=function(t){if("undefined"!=typeof t){if(t.target!==t.currentTarget)return;e(t.target).unbind(T,b)}else e(this).unbind(T,b);P=!0,e(this).css(w),g&&g.call(this)},o>0&&(this.bind(T,b),setTimeout(function(){P||b.call(E)},1e3*(o+m)+25)),this.size()&&this.get(0).clientLeft,this.css(_),o<=0&&setTimeout(function(){E.each(function(){b.call(this)})},0),this},m=null}(i),function(e,t){function n(n,i,o,r,s){"function"!=typeof i||s||(s=i,i=t);var a={opacity:o};return r&&(a.scale=r,n.css(e.fx.cssPrefix+"transform-origin","0 0")),n.animate(a,i,null,s)}function i(t,i,o,r){return n(t,i,0,o,function(){s.call(e(this)),r&&r.call(this)})}var o=window.document,r=(o.documentElement,e.fn.show),s=e.fn.hide,a=e.fn.toggle;e.fn.show=function(e,i){return r.call(this),e===t?e=0:this.css("opacity",0),n(this,e,1,"1,1",i)},e.fn.hide=function(e,n){return e===t?s.call(this):i(this,e,"0,0",n)},e.fn.toggle=function(n,i){return n===t||"boolean"==typeof n?a.call(this,n):this.each(function(){var t=e(this);t["none"==t.css("display")?"show":"hide"](n,i)})},e.fn.fadeTo=function(e,t,i){return n(this,e,t,null,i)},e.fn.fadeIn=function(e,t){var n=this.css("opacity");return n>0?this.css("opacity",0):n=1,r.call(this).fadeTo(e,n,t)},e.fn.fadeOut=function(e,t){return i(this,e,null,t)},e.fn.fadeToggle=function(t,n){return this.each(function(){var i=e(this);i[0==i.css("opacity")||"none"==i.css("display")?"fadeIn":"fadeOut"](t,n)})}}(i),function(e){var t,n=[];e.fn.remove=function(){return this.each(function(){this.parentNode&&("IMG"===this.tagName&&(n.push(this),this.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",t&&clearTimeout(t),t=setTimeout(function(){n=[]},6e4)),this.parentNode.removeChild(this))})}}(i),function(e){function t(t,i){var c=t[a],l=c&&o[c];if(void 0===i)return l||n(t);if(l){if(i in l)return l[i];var u=s(i);if(u in l)return l[u]}return r.call(e(t),i)}function n(t,n,r){var c=t[a]||(t[a]=++e.uuid),l=o[c]||(o[c]=i(t));return void 0!==n&&(l[s(n)]=r),l}function i(t){var n={};return e.each(t.attributes||c,function(t,i){0==i.name.indexOf("data-")&&(n[s(i.name.replace("data-",""))]=e.zepto.deserializeValue(i.value))}),n}var o={},r=e.fn.data,s=e.camelCase,a=e.expando="Zepto"+ +new Date,c=[];e.fn.data=function(i,o){return void 0===o?e.isPlainObject(i)?this.each(function(t,o){e.each(i,function(e,t){n(o,e,t)})}):0 in this?t(this[0],i):void 0:this.each(function(){n(this,i,o)})},e.fn.removeData=function(t){return"string"==typeof t&&(t=t.split(/\s+/)),this.each(function(){var n=this[a],i=n&&o[n];i&&e.each(t||i,function(e){delete i[t?s(this):e]})})},["remove","empty"].forEach(function(t){var n=e.fn[t];e.fn[t]=function(){var e=this.find("*");return"remove"===t&&(e=e.add(this)),e.removeData(),n.call(this)}})}(i),function(e){function t(n){var i=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],o="pending",r={state:function(){return o},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var n=arguments;return t(function(t){e.each(i,function(i,o){var a=e.isFunction(n[i])&&n[i];s[o[1]](function(){var n=a&&a.apply(this,arguments);if(n&&e.isFunction(n.promise))n.promise().done(t.resolve).fail(t.reject).progress(t.notify);else{var i=this===r?t.promise():this,s=a?[n]:arguments;t[o[0]+"With"](i,s)}})}),n=null}).promise()},promise:function(t){return null!=t?e.extend(t,r):r}},s={};return e.each(i,function(e,t){var n=t[2],a=t[3];r[t[1]]=n.add,a&&n.add(function(){o=a},i[1^e][2].disable,i[2][2].lock),s[t[0]]=function(){return s[t[0]+"With"](this===s?r:this,arguments),this},s[t[0]+"With"]=n.fireWith}),r.promise(s),n&&n.call(s,s),s}var n=Array.prototype.slice;e.when=function(i){var o,r,s,a=n.call(arguments),c=a.length,l=0,u=1!==c||i&&e.isFunction(i.promise)?c:0,p=1===u?i:t(),f=function(e,t,i){return function(r){t[e]=this,i[e]=arguments.length>1?n.call(arguments):r,i===o?p.notifyWith(t,i):--u||p.resolveWith(t,i)}};if(c>1)for(o=new Array(c),r=new Array(c),s=new Array(c);l<c;++l)a[l]&&e.isFunction(a[l].promise)?a[l].promise().done(f(l,s,a)).fail(p.reject).progress(f(l,r,o)):--u;return u||p.resolveWith(s,a),p.promise()},e.Deferred=t}(i),function(e){e.Callbacks=function(t){t=e.extend({},t);var n,i,o,r,s,a,c=[],l=!t.once&&[],u=function(e){for(n=t.memory&&e,i=!0,a=r||0,r=0,s=c.length,o=!0;c&&a<s;++a)if(c[a].apply(e[0],e[1])===!1&&t.stopOnFalse){n=!1;break}o=!1,c&&(l?l.length&&u(l.shift()):n?c.length=0:p.disable())},p={add:function(){if(c){var i=c.length,a=function(n){e.each(n,function(e,n){"function"==typeof n?t.unique&&p.has(n)||c.push(n):n&&n.length&&"string"!=typeof n&&a(n)})};a(arguments),o?s=c.length:n&&(r=i,u(n))}return this},remove:function(){return c&&e.each(arguments,function(t,n){for(var i;(i=e.inArray(n,c,i))>-1;)c.splice(i,1),o&&(i<=s&&--s,i<=a&&--a)}),this},has:function(t){return!(!c||!(t?e.inArray(t,c)>-1:c.length))},empty:function(){return s=c.length=0,this},disable:function(){return c=l=n=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,n||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!c||i&&!l||(t=t||[],t=[e,t.slice?t.slice():t],o?l.push(t):u(t)),this},fire:function(){return p.fireWith(this,arguments)},fired:function(){return!!i}};return p}}(i),function(e){function t(t){return t=e(t),!(!t.width()&&!t.height())&&"none"!==t.css("display")}function n(e,t){e=e.replace(/=#\]/g,'="#"]');var n,i,o=a.exec(e);if(o&&o[2]in s&&(n=s[o[2]],i=o[3],e=o[1],i)){var r=Number(i);i=isNaN(r)?i.replace(/^["']|["']$/g,""):r}return t(e,n,i)}var i=e.zepto,o=i.qsa,r=i.matches,s=e.expr[":"]={visible:function(){if(t(this))return this},hidden:function(){if(!t(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(e){if(0===e)return this},last:function(e,t){if(e===t.length-1)return this},eq:function(e,t,n){if(e===n)return this},contains:function(t,n,i){if(e(this).text().indexOf(i)>-1)return this},has:function(e,t,n){if(i.qsa(this,n).length)return this}},a=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),c=/^\s*>/,l="Zepto"+ +new Date;i.qsa=function(t,r){return n(r,function(n,s,a){try{var u;!n&&s?n="*":c.test(n)&&(u=e(t).addClass(l),n="."+l+" "+n);var p=o(t,n)}catch(f){throw console.error("error performing selector: %o",r),f}finally{u&&u.removeClass(l)}return s?i.uniq(e.map(p,function(e,t){return s.call(e,t,p,a)})):p})},i.matches=function(e,t){return n(t,function(t,n,i){return(!t||r(e,t))&&(!n||n.call(e,null,i)===e)})}}(i),function(e){e.fn.end=function(){return this.prevObject||e()},e.fn.andSelf=function(){return this.add(this.prevObject||e())},"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings".split(",").forEach(function(t){var n=e.fn[t];e.fn[t]=function(){var e=n.apply(this,arguments);return e.prevObject=this,e}})}(i),function(e){function t(e){return e._zid||(e._zid=f++)}function n(e,n,r,s){if(n=i(n),n.ns)var a=o(n.ns);return(m[t(e)]||[]).filter(function(e){return e&&(!n.e||e.e==n.e)&&(!n.ns||a.test(e.ns))&&(!r||t(e.fn)===t(r))&&(!s||e.sel==s)})}function i(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function o(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function r(e,t){return e.del&&!w&&e.e in y||!!t}function s(e){return x[e]||w&&y[e]||e}function a(n,o,a,c,u,f,d){var h=t(n),g=m[h]||(m[h]=[]);o.split(/\s/).forEach(function(t){if("ready"==t)return e(document).ready(a);var o=i(t);o.fn=a,o.sel=u,o.e in x&&(a=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return o.fn.apply(this,arguments)}),o.del=f;var h=f||a;o.proxy=function(e){if(e=l(e),!e.isImmediatePropagationStopped()){e.data=c;var t=h.apply(n,e._args==p?[e]:[e].concat(e._args));return t===!1&&(e.preventDefault(),e.stopPropagation()),t}},o.i=g.length,g.push(o),"addEventListener"in n&&n.addEventListener(s(o.e),o.proxy,r(o,d))})}function c(e,i,o,a,c){var l=t(e);(i||"").split(/\s/).forEach(function(t){n(e,t,o,a).forEach(function(t){delete m[l][t.i],"removeEventListener"in e&&e.removeEventListener(s(t.e),t.proxy,r(t,c))})})}function l(t,n){return!n&&t.isDefaultPrevented||(n||(n=t),e.each(E,function(e,i){var o=n[e];t[e]=function(){return this[i]=b,o&&o.apply(n,arguments)},t[i]=_}),(n.defaultPrevented!==p?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=b)),t}function u(e){var t,n={originalEvent:e};for(t in e)j.test(t)||e[t]===p||(n[t]=e[t]);return l(n,e)}var p,f=1,d=Array.prototype.slice,h=e.isFunction,g=function(e){return"string"==typeof e},m={},v={},w="onfocusin"in window,y={focus:"focusin",blur:"focusout"},x={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",e.event={add:a,remove:c},e.proxy=function(n,i){var o=2 in arguments&&d.call(arguments,2);if(h(n)){var r=function(){return n.apply(i,o?o.concat(d.call(arguments)):arguments)};return r._zid=t(n),r}if(g(i))return o?(o.unshift(n[i],n),e.proxy.apply(null,o)):e.proxy(n[i],n);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var b=function(){return!0},_=function(){return!1},j=/^([A-Z]|returnValue$|layer[XY]$)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,i,o,r){var s,l,f=this;return t&&!g(t)?(e.each(t,function(e,t){f.on(e,n,i,t,r)}),f):(g(n)||h(o)||o===!1||(o=i,i=n,n=p),o!==p&&i!==!1||(o=i,i=p),o===!1&&(o=_),f.each(function(p,f){r&&(s=function(e){return c(f,e.type,o),o.apply(this,arguments)}),n&&(l=function(t){var i,r=e(t.target).closest(n,f).get(0);if(r&&r!==f)return i=e.extend(u(t),{currentTarget:r,liveFired:f}),(s||o).apply(r,[i].concat(d.call(arguments,1)))}),a(f,t,o,i,n,l||s)}))},e.fn.off=function(t,n,i){var o=this;return t&&!g(t)?(e.each(t,function(e,t){o.off(e,n,t)}),o):(g(n)||h(i)||i===!1||(i=n,n=p),i===!1&&(i=_),o.each(function(){c(this,t,i,n)}))},e.fn.trigger=function(t,n){return t=g(t)||e.isPlainObject(t)?e.Event(t):l(t),t._args=n,this.each(function(){t.type in y&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,i){var o,r;return this.each(function(s,a){o=u(g(t)?e.Event(t):t),o._args=i,o.target=a,e.each(n(a,t.type||t),function(e,t){if(r=t.proxy(o),o.isImmediatePropagationStopped())return!1})}),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),e.Event=function(e,t){g(e)||(t=e,e=t.type);var n=document.createEvent(v[e]||"Events"),i=!0;if(t)for(var o in t)"bubbles"==o?i=!!t[o]:n[o]=t[o];return n.initEvent(e,i,!0),l(n)}}(i),t.exports=i},{}]},{},[1]);